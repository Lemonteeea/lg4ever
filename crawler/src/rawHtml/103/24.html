<body style="font-size: 15px; height: 100%; width: 100%; background-color: rgb(237, 237, 237);"><h1 style="display: none">深入浅出搞定 React - 拉勾教育</h1>
    
  <meta content="前端开发,React,React-Hooks,栈调,Fiber,setState,Redux,Facebook,源码分析,技术栈,JS,ES2015,React-Router,DOM,React Native,state,props,diff,umi,Suspense,React.js,batchUpdate,setState,	Web ,前端,UI,HTML,jsx,ShoppingList,Props" name="keywords">

  <meta content="本专栏基于源码提炼出来原理，所涉及的原理，可以帮助你解决掉实际工作中的大多数疑难杂症，也可以 match 上大厂对资深前端工程师的技术深度的要求。在广度方面，专栏涵盖了对基本问题的较为深入和完善的讲解，涵盖了 React 周边生态及生产实践，足以帮助你构建起“表象——原理——应用”的完整学习链路。" name="description">

  <title>深入浅出搞定 React - 高级前端工程师 - 拉勾教育</title>
<meta name="apple-mobile-web-app-title" content="深入浅出搞定 React - 高级前端工程师 - 拉勾教育">

  <script>
// 全局token变量，防CSRF，防重复提交
window.X_Anti_Forge_Code = '';
window.X_Anti_Forge_Token = '';
var mds = {
  userInfo: {
      shortName: "",
  }
}
window.mds = mds;
</script>
<script type="text/javascript" src="//g.alicdn.com/AWSC/AWSC/awsc.js"></script>
<script src="//s20.lgstatic.com/components/edu-fe/edu-pay-component/1.0.12/main.js"></script>
<script>
  window.userInfo = {
      userId: '20015885',
  };
  //风控系统
  (function() {
      console.log(window);
      window._smReadyFuncs = [];
      window.SMSdk = {
          ready: function(fn) {
              fn && _smReadyFuncs.push(fn);
          }
      };
  // 1. 通用配置项
      window._smConf = {
          organization: 'uTuOLHj2zLGJgglbtLOC',            //必填，组织标识，邮件中organization项
          staticHost: 'static.fengkongcloud.com'  //必填, 设置JS-SDK文件域名

      //2.连接海外机房特殊配置项，仅供设备数据上报海外机房客户使用
      //
      // 2.1 业务机房在国内
      //     1) 用户分布：国内（默认设置）
      // apiHost:'fp-it.fengkongcloud.com'
  //      2) 用户分布：全球
  //  apiHost:'fp-it-acc.fengkongcloud.com'
  //
  // 2.2 业务机房在欧美
  //    1) 用户分布：欧美
  // apiHost: 'fp-na-it.fengkongcloud.com'
  //    2) 用户分布：全球
  // apiHost: 'fp-na-it-acc.fengkongcloud.com'
  //
  //2.3 业务机房在东南亚
  //   1) 用户分布：东南亚
  // apiHost:'fp-sa-it.fengkongcloud.com'
  //   2) 用户分布：全球
  // apiHost:'fp-sa-it-acc.fengkongcloud.com'

  // 2.4 私有化特殊配置
  // staticHost: 'xxxxxx';  // 私有化部署的JS-SDK文件域名
  // apiHost: 'xxxxxx';  // 私有化部署的服务域名

      };

      var url = (function () {
          var originHost = 'static2.fengkongcloud.com';
          var isHttps = document.location.protocol === 'https:';
          var protocol = isHttps ? 'https://' : 'http://';
          var fpJsPath = '/fpv2.js';
          var url =  protocol + _smConf.staticHost + fpJsPath;
          var ua = navigator.userAgent.toLowerCase();
          var isWinXP = /windows\s(?:nt\s5.1)|(?:xp)/.test(ua);
          var isLowIE = /msie\s[678]\.0/.test(ua);

          if (isHttps && isWinXP && isLowIE) {
              url = protocol + originHost + fpJsPath;
          }

          return url;
      })();
      var sm = document.createElement('script');
      var s = document.getElementsByTagName('script')[0];
      sm.src = url;
      s.parentNode.insertBefore(sm, s);
  })();
  //阿里云风控系统
  var uabModule;
  var webUmidToken;
  //人机识别模块，只需初始化一次
  AWSC.use("uab", function (state, uab) {
      if(state === "loaded") {
          uabModule = uab;
      }
  });
  //设备指纹模块，得到设备token，只需初始化一次
  AWSC.use("um", function (state, um) {
      if(state === "loaded") {
          um.init({
              //appName请直接使用'saf-aliyun-com'
              appName: 'saf-aliyun-com',
          }, function (initState, result) {
              if(initState === 'success') {
                  webUmidToken = result.tn;
              }
          });
      }
  });
/////
  function dealSmDeviceId(cb) {
      var smTimeoutTime = 200;
      var smDeviceId = '';
      var smDeviceIdReady = false;
      var smTimer = setTimeout(function() {
          smDeviceId = SMSdk.getDeviceId ? SMSdk.getDeviceId() : smDeviceId;
          if (!smDeviceIdReady && smDeviceId) {
              smDeviceIdReady = true;
              //执行业务逻辑
              cb && cb(smDeviceId);
          }
      }, smTimeoutTime);

      SMSdk.ready(function() {
          smDeviceId = SMSdk.getDeviceId ? SMSdk.getDeviceId() : smDeviceId;
          clearTimeout(smTimer);

          if (!smDeviceIdReady && smDeviceId) {
              smDeviceIdReady = true;
              //执行业务逻辑
              cb && cb(smDeviceId);
          }
      });
  };
  function getCookie(name){
      var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
      if(arr=document.cookie.match(reg)){
          return unescape(arr[2]);
      }else{
          return null;
      }
  }
  function getHost(){
      let host = window.location.host.split('.');
      if(host[1] && host[1] == 'lagou'){
         return true;
      }
      return false;
  }
  const getdeviceld = function (deviceId){
      if(deviceId){
          let data = [];
          data.push({channel: 1,thirdDeviceId:deviceId});
          data.push({channel: 2,thirdDeviceId: uabModule && uabModule.getUA() + ',' + webUmidToken});
          var expats=new Date();
          expats.setTime(expats.getTime() + 7 * 24 * 60 * 60 * 1000);
          if(getHost()){
              document.cookie = 'thirdDeviceIdInfo=' + escape(JSON.stringify(data)) + ';expires=' +expats.toGMTString()+';path=/;domain=.lagou.com;';
          }else{
              document.cookie = 'thirdDeviceIdInfo=' + escape(JSON.stringify(data)) + ';expires=' +expats.toGMTString()+';path=/;';
          }
      }else{
          dealSmDeviceId(getdeviceld)
      }
  }
  if(!getCookie('thirdDeviceIdInfo')){
      dealSmDeviceId(getdeviceld)
  }
  // Note: onepass h5无感本机认证
  // https://docs.geetest.com/onelogin/deploy/h5
  (function () {
      const isPc = !/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(window.navigator.userAgent)
      if (isPc) return
      // 网络判断方法
      function getNetworkType(){
          var common_cell = ['cellular', '2g', '3g', '4g', '5g','3G/2G'];
          var user_agent = navigator.userAgent.toLowerCase();
          var connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection ||{type: 'unknown'};
          var type;
          // 判断是否是微信内置浏览器
          var isWeixin = /micromessenger/.test(user_agent);
          if(isWeixin) {
              if(user_agent.indexOf('nettype') !== -1){
                  type = user_agent.match(/nettype\/\w+/) ? user_agent.match(/nettype\/\w+/)[0] : 'nettype/unknow';
                  type = type.replace('nettype/', '')
              }else {
                  var weixinType = {"network_type:wifi":"wifi","network_type:edge":"3G/2G","network_type:fail":"fail","network_type:wwan":"3G/2G"}
                  document.addEventListener("WeixinJSBridgeReady",function onBridgeReady(){
                      WeixinJSBridge.invoke('getNetworkType',{},function(e){
                          type = weixinType[e.err_msg];
                      });
                  });
              }
          }else {
              type = (connection && connection.type) || 'unknown';
          }
          // 对type 做统一处理
          if(type && common_cell.indexOf(type) !== -1){
              return 'cellular'
          }else if ( type === 'wifi'){
              return 'wifi'
          }
          return 'unknown'
      }
      var metaEle = document.createElement('meta')
      metaEle.content = 'always'
      metaEle.name = "referrer"
      document.head.appendChild(metaEle)
      var scriptEle = document.createElement('script')
      scriptEle.src = "https://s21.lgstatic.com/components/onepassh5/2.3.0/onepassh5.min.js"
      document.head.appendChild(scriptEle)
      scriptEle.onload = function () {
          console.log(GOP, 'GOP 加载成功')
          if (typeof GOP !== 'function') return
          var nettype = getNetworkType();
          // Note: onepass api h5场景只支持数据网络的场景
          var ispre = nettype === 'wifi'? false: true;
          window.OP_INSTANCE = new GOP({
              app_id: '000760cd4c8bb48a3860e5070ded2717', // 在极验后台获取，生成app_id后等待极验审核成功后生效
              timeout: 30000, // 超时时长，默认30000
              pre_init: ispre, // 是否初始化时获取运营商参数，默认为true。 建议开启避免影响认证的响应时间
          })
      }
  })()
</script>
<link href="https://s0.lgstatic.com/kw-web-fed/common.9f883843.css" rel="stylesheet"><link href="https://s0.lgstatic.com/kw-web-fed/course/main.793fddbd.css" rel="stylesheet">



<div id="app" class=""><div data-v-daa3f53a="" data-v-6cc00bca="" class="pc-detail-wrap"><div data-v-5d185b94="" data-v-daa3f53a="" class="wrap pc-header"><div data-v-5d185b94="" class="wrap-content"><div data-v-5d185b94="" class="wrap-left"><a data-v-5d185b94="" href="https://edu.lagou.com"><img data-v-5d185b94="" src="https://s21.lgstatic.com/growth/activity/20210729/1627528017710.png?x-oss-process=style/80" alt="" class="logo"></a> <h1 data-v-5d185b94="" class="title">
          拉勾教育
      </h1> <h1 data-v-5d185b94="" class="desc">
          互联网职业教育平台
      </h1></div> <div data-v-5d185b94="" class="wrap-right"><div data-v-5d185b94="" class="tab-list"><h2 data-v-5d185b94="" class="tab-item">
              选课
          </h2><h2 data-v-5d185b94="" class="tab-item">
              学习
          </h2><h2 data-v-5d185b94="" class="tab-item">
              企业培训
          </h2></div> <div data-v-5d185b94="" class="login-wrap"><div data-v-5d185b94="" class="wrap-login"><span data-v-5d185b94="" class="username triangle">
                  张熙远
                  <div data-v-5d185b94="" class="tool-tip tool-tip-user"><a data-v-5d185b94="" href="https://tb.53kf.com/code/client/90d3e270b5d355aa44bafe74fd7fe8a11/3" target="_blank" class="tool-tip-item">
                          帮助与反馈
                      </a><a data-v-5d185b94="" href="https://kaiwu.lagou.com/certificate/index" target="_certificate" class="tool-tip-item">
                          学业证书
                      </a><a data-v-5d185b94="" href="https://kaiwu.lagou.com/setting" target="_self" class="tool-tip-item">
                          账号设置
                      </a><a data-v-5d185b94="" href="https://kaiwu.lagou.com/frontLogout.do" target="_self" class="tool-tip-item">
                          退出登录
                      </a></div></span> <img data-v-5d185b94="" src="https://s0.lgstatic.com/common/image/pc/default_boy_headpic1.png" alt="" class="avatar"></div></div></div></div> <!----></div> <div data-v-daa3f53a="" class="container"><div data-v-130a0286="" data-v-daa3f53a="" class="pub-header"><div data-v-130a0286="" class="pub-header-container-wrap"><div data-v-130a0286="" class="item-wrap inline-block catalog"><div data-v-130a0286="" class="img-wrap inline-block"></div> <div data-v-130a0286="" class="text-wrap inline-block">
          收起目录
      </div></div> <div data-v-130a0286="" class="splice-line inline-block"></div> <div data-v-130a0286="" class="item-wrap inline-block pre"><div data-v-130a0286="" class="img-wrap inline-block"></div> <div data-v-130a0286="" class="text-wrap inline-block">
          上一讲
      </div></div> <div data-v-130a0286="" class="splice-line inline-block"></div> <div data-v-130a0286="" class="item-wrap inline-block next"><div data-v-130a0286="" class="img-wrap inline-block"></div> <div data-v-130a0286="" class="text-wrap inline-block">
          下一讲
      </div></div> <div data-v-130a0286="" class="splice-line inline-block"></div> <div data-v-130a0286="" class="item-wrap inline-block detail"><div data-v-130a0286="" class="img-wrap inline-block"></div> <div data-v-130a0286="" class="text-wrap inline-block">
          课程详情
      </div></div> <div data-v-130a0286="" class="splice-line inline-block"></div> <div data-v-130a0286="" class="item-wrap inline-block all"><div data-v-130a0286="" class="img-wrap inline-block"></div> <div data-v-130a0286="" class="text-wrap inline-block">
          全部课程
      </div></div></div></div> <div data-v-daa3f53a="" class="content-wrap"><div data-v-daa3f53a="" class="left-content-wrap"><div data-v-5f686215="" data-v-daa3f53a="" class="menu-top-tips inline-block"><img data-v-5f686215="" src="https://s0.lgstatic.com/i/image/M00/5D/09/Ciqc1F-D0-OAZTxlAABYS9gye8s357.png" class="image-wrap"> <div data-v-5f686215="" class="menu-top-tips-wrap inline-block"><div data-v-5f686215="" class="title">
      深入浅出搞定 React
  </div> <div data-v-5f686215="" class="name">
      修言
      <div data-v-5f686215="" class="incise inline-block"></div>
      高级前端工程师
  </div> <!----> <div data-v-5f686215="" class="button btn btn-pc-css">
      专属班主任
  </div></div></div> <div data-v-daa3f53a="" class="menu-content calc"><div data-v-68b0779c="" data-v-daa3f53a="" class="class-menu-contaniner more-sections more-sections-detail"><!----> <div data-v-68b0779c="" class="class-menu-box" style="max-height: 185px;"><div data-v-68b0779c="" class="kw-icon-arrow show show-detail show-active"></div> <div data-v-68b0779c="" class="section-name single-line section-name-detail">
      开篇词
  </div> <div data-v-68b0779c="" class="class-menu-block"><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  开篇词 | 这一次，真正吃透 React 知识链路与底层逻辑
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div></div></div><div data-v-68b0779c="" class="class-menu-box" style="max-height: 677px;"><div data-v-68b0779c="" class="kw-icon-arrow show show-detail show-active"></div> <div data-v-68b0779c="" class="section-name single-line section-name-detail">
      模块一：系统深入学习“基础知识”
  </div> <div data-v-68b0779c="" class="class-menu-block"><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  01 | JSX 代码是如何“摇身一变”成为 DOM 的？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  02 | 为什么 React 16 要更改组件的生命周期？（上）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  03 | 为什么 React 16 要更改组件的生命周期？（下）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  04 | 数据是如何在 React 组件之间流动的？（上）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  05 | 数据是如何在 React 组件之间流动的？（下）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  06 | React-Hooks 设计动机与工作模式（上）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  07 | React-Hooks 设计动机与工作模式（下）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div></div></div><div data-v-68b0779c="" class="class-menu-box" style="max-height: 923px;"><div data-v-68b0779c="" class="kw-icon-arrow show show-detail show-active"></div> <div data-v-68b0779c="" class="section-name single-line section-name-detail">
      模块二：刨根问底吃透“核心原理”
  </div> <div data-v-68b0779c="" class="class-menu-block"><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  08 | 深入 React-Hooks 工作机制：“原则”的背后，是“原理”
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  09 | 真正理解虚拟 DOM：React 选它，真的是为了性能吗？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  10 | React 中的“栈调和”（Stack Reconciler）过程是怎样的？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  11 | setState 到底是同步的，还是异步的？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  12 | 如何理解 Fiber 架构的迭代动机与设计思想？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  13 | ReactDOM.render 是如何串联渲染链路的？（上）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  14 | ReactDOM.render 是如何串联渲染链路的？（中）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  15 | ReactDOM.render 是如何串联渲染链路的？（下）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  16 | 剖析 Fiber 架构下 Concurrent 模式的实现原理
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  17 | 特别的事件系统：React 事件与 DOM 事件有何不同？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div></div></div><div data-v-68b0779c="" class="class-menu-box" style="max-height: 431px;"><div data-v-68b0779c="" class="kw-icon-arrow show show-detail show-active"></div> <div data-v-68b0779c="" class="section-name single-line section-name-detail">
      模块三：“周边生态”帮你拓宽技术视野
  </div> <div data-v-68b0779c="" class="class-menu-block"><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  18 | 揭秘 Redux 设计思想与工作原理（上）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  19 | 揭秘 Redux 设计思想与工作原理（下）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  20 | 从 Redux 中间件实现原理切入，理解“面向切面编程”
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  21 | 从 React-Router 切入，系统学习前端路由解决方案
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div></div></div><div data-v-68b0779c="" class="class-menu-box" style="max-height: 267px;"><div data-v-68b0779c="" class="kw-icon-arrow show show-detail show-active"></div> <div data-v-68b0779c="" class="section-name single-line section-name-detail">
      模块四：“生产实践”通用法则
  </div> <div data-v-68b0779c="" class="class-menu-block"><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  22 | 思路拓展：如何打造高性能的 React 应用？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis   isclick  class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  23 | 跟 React 学设计模式：掌握编程“套路”，打造高质量应用
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div></div></div><div data-v-68b0779c="" class="class-menu-box" style="max-height: 185px;"><div data-v-68b0779c="" class="kw-icon-arrow show show-detail show-active"></div> <div data-v-68b0779c="" class="section-name single-line section-name-detail">
      结束语
  </div> <div data-v-68b0779c="" class="class-menu-block"><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  结束语 | 聊聊 React 17，谈谈学习前端框架的心法
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div></div></div></div></div></div> <div data-v-daa3f53a="" class="right-content-wrap" style="height: 100px;"><div data-v-1605a430="" data-v-daa3f53a="" class="main-wrap"><div data-v-1605a430=""><h1 data-v-1605a430="" class="main-title">
      23 | 跟 React 学设计模式：掌握编程“套路”，打造高质量应用
  </h1> <div data-v-1605a430="" class="main-tips">
      2020/12/28
      <span data-v-1605a430="" class="auth">修言</span></div> <div data-v-1605a430="" class="media-player-wrap"><div data-v-6ecd2302="" data-v-1605a430=""><div data-v-6ecd2302="" class="media-container"><div data-v-6ecd2302="" class="button-wrap inline-block"><div data-v-6ecd2302="" class="button-icon inline-block"></div></div> <div data-v-6ecd2302="" class="data-wrap inline-block"><div data-v-6ecd2302="" class="progress-bar"><div class="vue-slider vue-slider-ltr" style="padding: 7px 0px; width: auto; height: 4px;"><div class="vue-slider-rail" style="height: 2px; background: rgb(213, 218, 223); border-radius: 1.5px;"><div class="vue-slider-process" style="height: 100%; top: 0px; left: 0%; width: 0%; transition-property: width, left; transition-duration: 0.5s; background: rgb(252, 215, 102);"></div><div aria-valuetext="00:00/16:06" class="vue-slider-dot vue-slider-dot-hover" role="slider" aria-valuenow="0" aria-valuemin="0" aria-valuemax="966" aria-orientation="horizontal" tabindex="0" style="width: 14px; height: 14px; transform: translate(-50%, -50%); top: 50%; left: 0%; transition: left 0.5s ease 0s;"><div class="vue-slider-dot-handle" style="width: 16px; height: 16px; background: rgb(252, 215, 102); box-shadow: none; margin-top: -1px; z-index: 1;"></div><div class="vue-slider-dot-tooltip vue-slider-dot-tooltip-top"><div class="vue-slider-dot-tooltip-inner vue-slider-dot-tooltip-inner-top" style="padding: 2px 12px; border-radius: 14px; font-size: 14px; color: rgb(0, 0, 0); background: rgb(252, 215, 102); min-width: 20px; border-color: rgb(252, 215, 102);"><span class="vue-slider-dot-tooltip-text">00:00/16:06</span></div></div></div></div></div></div> <div data-v-6ecd2302="" class="detail-wrap "><div data-v-6ecd2302="" class="detail-one">
              42M
          </div> <div data-v-6ecd2302="" class="detail-two">
              00:00/16:06
          </div></div></div> <div data-v-6ecd2302="" class="division-line inline-block"></div> <div data-v-6ecd2302="" class="viedo-wrap inline-block"><div data-v-6ecd2302="" class="viedo-icon"></div> <div data-v-6ecd2302="" class="text">
          看视频
      </div></div></div> <!----></div></div> <div data-v-1605a430="" class="main-container"><div data-v-1605a430="" class="rich-text-wrap"><p data-nodeid="4737">这一讲我们将针对 React 中的设计模式进行探讨。</p>



<p data-nodeid="3799">与性能优化的视角相似，当我们谈论 React 设计模式时，实际上是在谈论“React 组件的设计模式”。在 React 设计模式中，最重要、也是最为大家所津津乐道的几个模式分别是：</p>
<ul data-nodeid="3800">
<li data-nodeid="3801">
<p data-nodeid="3802"><strong data-nodeid="3923">高阶组件（HOC）</strong></p>
</li>
<li data-nodeid="3803">
<p data-nodeid="3804"><strong data-nodeid="3927">Render Props</strong></p>
</li>
<li data-nodeid="3805">
<p data-nodeid="3806"><strong data-nodeid="3931">剥离有状态组件与无状态组件</strong></p>
</li>
</ul>
<p data-nodeid="3807">除此之外，每个团队或许都会有自己的一套在实践中摸索出的设计模式方法论。这些形态各异的 React 设计模式虽然实现思路有所不同，但本质上基本都是为了实现这样一个终极目标——以尽可能优雅的姿态，<strong data-nodeid="3937">实现组件逻辑的复用</strong>。</p>
<p data-nodeid="3808">而我们今天即将探讨的这 3 种模式，也无出其右。</p>
<p data-nodeid="3809">在本讲，我们首先要做的第一件事情，就是把每一种设计模式到底是什么、怎么用给弄清楚。在这个过程中，你会对“单一职责”和“开放封闭”这两个非常重要的设计原则有所认知。</p>
<p data-nodeid="3810">在此基础上，你还需要去思考这样一个问题：设计模式是否是万能的？如果不是，那么对框架来说，还有没有更加深刻、彻底的解法呢？</p>
<p data-nodeid="3811">没错，最终的话题还是要回到 Hooks 上来，哈哈。接下来我们就先迈出第一步，一起认识/重温一下高阶组件这个概念。</p>
<h3 data-nodeid="3812">高阶组件（HOC）：最经典的组件逻辑复用方式</h3>
<h4 data-nodeid="3813">什么是高阶组件</h4>
<blockquote data-nodeid="3814">
<p data-nodeid="3815">高阶组件（HOC）是 React 中用于复用组件逻辑的一种高级技巧。HOC 自身不是 React API 的一部分，它是一种基于 React 的组合特性而形成的设计模式。——React 官方</p>
</blockquote>
<p data-nodeid="3816">高阶组件（Higher Order Components）在概念上沿袭了高阶函数（Higher-Order Function）。在第 20 讲，我们已经和高阶函数打过交道，这里我们再复习一下高阶函数的概念：<strong data-nodeid="3950">接收函数作为输入，或者输出另一个函数的一类函数，就是高阶函数</strong>。</p>
<p data-nodeid="3817">相应的，高阶组件指的就是<strong data-nodeid="3960">参数为组件，返回值为新组件的函数</strong>。没错，<strong data-nodeid="3961">高阶组件本质上是一个函数</strong>。下面是一个简单的高阶组件示例：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="js"><ol><li><div class="code-word"><span class="hljs-keyword">const</span> withProps = <span class="hljs-function">(<span class="hljs-params">WrappedComponent</span>) =&gt;</span> {
</div></li><li><div class="code-word">    <span class="hljs-keyword">const</span> targetComponent = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> (
</div></li><li><div class="code-word">        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"wrapper-container"</span>&gt;</span>
</span></div></li><li><div class="code-word">            <span class="hljs-tag">&lt;<span class="hljs-name">WrappedComponent</span> {<span class="hljs-attr">...props</span>} /&gt;</span>
</div></li><li><div class="code-word">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</div></li><li><div class="code-word">    );
</div></li><li><div class="code-word">    <span class="hljs-keyword">return</span> targetComponent;
</div></li><li><div class="code-word">};
</div></li></ol></code></pre></div>



<p data-nodeid="3819">在这段代码中，withProps 就是一个高阶组件。</p>
<h4 data-nodeid="3820">高阶组件是如何实现逻辑复用的？</h4>
<p data-nodeid="3821">现在我们考虑这样一种情况：我有一个名为 checkUserAccess 的方法，这个方法专门用来校验用户的身份是否合法，若不合法，那么一部分组件就要根据这个不合法的身份调整自身的展示逻辑（比如查看个人信息界面需要提示“请校验身份”等）。</p>
<p data-nodeid="3822">假如说页面中的 A、B、C、D、E 五个组件都需要甄别用户身份是否合法，那么这五个组件在理论上都需要先请求一遍 checkUserAccess 这个接口。但一个一个对组件进行修改未免太麻烦了，我们期望对“获取 checkUserAccess 接口信息，并通知到对应组件”这层逻辑进行复用，这时候就可以请出高阶组件来帮忙了。</p>
<p data-nodeid="3823">我们可以像下面代码这样在高阶组件中定义这层通用的逻辑：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="dart"><ol><li><div class="code-word">// 假设 checkUserAccess 已经在 utils 文件中被封装为了一段独立的逻辑
</div></li><li><div class="code-word">import checkUserAccess from './utils
</div></li><li><div class="code-word">// 用高阶组件包裹目标组件
</div></li><li><div class="code-word">const withCheckAccess = (WrappedComponent) =&gt; {
</div></li><li><div class="code-word">    // 这部分是通用的逻辑：判断用户身份是否合法
</div></li><li><div class="code-word">    const isAccessible = checkUserAccess()  
</div></li><li><div class="code-word">    // 将 isAccessible（是否合法） 这个信息传递给目标组件
</div></li><li><div class="code-word">    const targetComponent = (props) =&gt; (
</div></li><li><div class="code-word">        &lt;div className="wrapper-container"&gt;
</div></li><li><div class="code-word">            &lt;WrappedComponent {...props} isAccessible={isAccessible} /&gt;
</div></li><li><div class="code-word">        &lt;/div&gt;
</div></li><li><div class="code-word">    );
</div></li><li><div class="code-word">    return targetComponent;
</div></li><li><div class="code-word">};
</div></li></ol></code></pre></div>





<p data-nodeid="3825">这样当我们需要为某个组件复用这层请求逻辑的时候，只需要直接用 withCheckAccess 包裹这个组件就可以了。以 A 组件为例，假设 A 组件的原始版本为 AComponent，那么包裹它的形式就是下面代码这样：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word"><span class="hljs-keyword">const</span> EnhancedAComponent = withCheckAccess(Acomponent);
</div></li></ol></code></pre></div>
<p data-nodeid="3827">通过简单地对高阶组件 withCheckAccess 进行引入，EnhancedAComponent 轻松具备了校验用户合法性的能力。这样一来，即便再多出 5 个组件想要引入 checkUserAccess，我们也不会怂——毕竟包裹五个组件和重写五段逻辑的工作量是没法相提并论的，哈哈。</p>
<p data-nodeid="3828">高阶组件不仅能够帮助我们简化逻辑的引入过程，还可以帮助我们规避掉逻辑变更带来的烦琐的修改步骤：假如这段 checkUserAccess 的逻辑是散落在 A、B、C、D、E 这五个组件之中的，那么一旦 checkUserAccess 的判定规则需要修改，我们就得需要去修改五段代码；但现在，checkUserAccess 被抽离进了一个独立的高阶组件里，我们在高阶组件中的一次修改，将在所有被它处理过的组件中生效。</p>
<p data-nodeid="3829">由此可以看出，高阶组件可以帮助我们<strong data-nodeid="3975">从根本上减少重复的编写和修改工作</strong>，这不仅是高阶组件这一种模式的利好，更是“逻辑复用”这件事情的意义所在。</p>
<h3 data-nodeid="3830">Render Props：逻辑复用的另一种思路</h3>
<blockquote data-nodeid="3831">
<p data-nodeid="3832" class="">术语<a href="https://cdb.reacttraining.com/use-a-render-prop-50de598f11ce" data-nodeid="3980">“render prop”</a>是指一种在 React 组件之间使用一个值为函数的 prop 共享代码的简单技术。——React 官方</p>
</blockquote>
<h4 data-nodeid="3833">什么是 render props？</h4>
<p data-nodeid="3834">render props 是 React 中复用组件逻辑的另一种思路，它在实现上和高阶组件有异曲同工之妙——两者都是把通用的逻辑提取到某一处。区别主要在于使用层面，<strong data-nodeid="3988">高阶组件的使用姿势是用“函数”包裹“组件”，而 render props 恰恰相反，它强调的是用“组件”包裹“函数”</strong>。</p>
<p data-nodeid="3835">一个简单的 render props 可以是这样的，见下面代码：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="js"><ol><li><div class="code-word"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>  
</div></li><li><div class="code-word"><span class="hljs-keyword">const</span> RenderChildren = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
</div></li><li><div class="code-word">  <span class="hljs-keyword">return</span>(
</div></li><li><div class="code-word">     <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.Fragment</span>&gt;</span>
</span></div></li><li><div class="code-word">        {props.children(props)}
</div></li><li><div class="code-word">     <span class="hljs-tag">&lt;/<span class="hljs-name">React.Fragment</span>&gt;</span>
</div></li><li><div class="code-word">  );
</div></li><li><div class="code-word">};
</div></li></ol></code></pre></div>

<p data-nodeid="3837">RenderChildren 将渲染它所有的子组件。从这段代码里，你需要把握住两个要点：</p>
<ol data-nodeid="3838">
<li data-nodeid="3839">
<p data-nodeid="3840">render props 的载体应该是一个<strong data-nodeid="3996">React 组件</strong>，这一点是与高阶组件不同的（高阶组件本质是函数）；</p>
</li>
<li data-nodeid="3841">
<p data-nodeid="3842">render props 组件正常工作的前提是它的<strong data-nodeid="4002">子组件需要以函数形式存在</strong>。</p>
</li>
</ol>
<p data-nodeid="3843">第 1 点相对明显一点，你可能会对第 2 点感到迷惑。没关系，我们直接来看 RenderChildren 的使用方式，请看下面代码：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">&lt;RenderChildren&gt;         
</div></li><li><div class="code-word">  {() =&gt; &lt;p&gt;我是 RenderChildren 的子组件&lt;/p&gt;}       
</div></li><li><div class="code-word">&lt;/RenderChildren&gt;
</div></li></ol></code></pre></div>
<p data-nodeid="3845">RenderChildren 本身是一个 React 组件，它可以包裹其他的 React 组件。一般来说，我们习惯于看到的包裹形式是“标签包裹着标签”，也就是下面代码演示的这种效果：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">&lt;RenderChildren&gt;         
</div></li><li><div class="code-word">  &lt;p&gt;我是 RenderChildren 的子组件&lt;/p&gt;     
</div></li><li><div class="code-word">&lt;/RenderChildren&gt;
</div></li></ol></code></pre></div>
<p data-nodeid="3847">但在 render props 这种模式下，它要求被 render props 组件标签包裹的一定是个函数，也就是所谓的“函数作为子组件传入”。这样一来，render props 组件就可以通过调用这个函数，传递 props，从而实现和目标组件的通信了。</p>
<h4 data-nodeid="3848">render props 是如何实现逻辑复用的？</h4>
<p data-nodeid="3849">这里我仍然以 checkUserAccess 这个场景举例。使用 render props 复用 checkUserAccess 这段逻辑，我们可以这样做，请看下面代码：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">// 假设 checkUserAccess 已经在 utils 文件中被封装为了一段独立的逻辑
</div></li><li><div class="code-word">import checkUserAccess from './utils
</div></li><li><div class="code-word">// 定义 render props 组件
</div></li><li><div class="code-word">const CheckAccess = (props) =&gt; {
</div></li><li><div class="code-word">    // 这部分是通用的逻辑：判断用户身份是否合法
</div></li><li><div class="code-word">    const isAccessible = checkUserAccess()  
</div></li><li><div class="code-word">    // 将 isAccessible（是否合法） 这个信息传递给目标组件
</div></li><li><div class="code-word">    return &lt;React.Fragment&gt;
</div></li><li><div class="code-word">        {props.children({ ...props, isAccessible })}
</div></li><li><div class="code-word">      &lt;/React.Fragment&gt;
</div></li><li><div class="code-word">};
</div></li></ol></code></pre></div>
<p data-nodeid="3851">接下来 CheckAccess 子组件就可以这样获取 isAccessible 的值，见下面代码：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">&lt;CheckAccess&gt;
</div></li><li><div class="code-word">  {
</div></li><li><div class="code-word">    (props) =&gt; {
</div></li><li><div class="code-word">      const { isAccessible } = props;
</div></li><li><div class="code-word">      return &lt;ChildComponent {...props} isAccessible={isAccessible} /&gt;
</div></li><li><div class="code-word">    }
</div></li><li><div class="code-word">  }
</div></li><li><div class="code-word">&lt;/CheckAccess&gt;
</div></li></ol></code></pre></div>
<p data-nodeid="3853">到这里，“函数作为子组件传入”这种情况，我们已经了解了它的来龙去脉。但其实，对于 &nbsp;render props 这种模式来说，<strong data-nodeid="4014">函数并不一定要作为子组件传入，它也可以以任意属性名传入，只要 render props 组件可以感知到它就行</strong>。</p>
<p data-nodeid="3854">举个例子，我可以允许函数通过一个名为 checkTaget 的属性传入 render props 组件，那么 CheckAccess 组件只需要改写一下它接收函数的形式即可，见下面代码：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="js"><ol><li><div class="code-word">// 假设 checkUserAccess 已经在 utils 文件中被封装为了一段独立的逻辑
</div></li><li><div class="code-word">import checkUserAccess from './utils
</div></li><li><div class="code-word">// 定义 render props 组件
</div></li><li><div class="code-word">const CheckAccess = (props) =&gt; {
</div></li><li><div class="code-word">    // 这部分是通用的逻辑：判断用户身份是否合法
</div></li><li><div class="code-word">    const isAccessible = checkUserAccess()  
</div></li><li><div class="code-word">    // 将 isAccessible（是否合法） 这个信息传递给目标组件
</div></li><li><div class="code-word">    return &lt;React.Fragment&gt;
</div></li><li><div class="code-word">        {props.checkTaget({ ...props, isAccessible })}
</div></li><li><div class="code-word">      &lt;/React.Fragment&gt;
</div></li><li><div class="code-word">};
</div></li></ol></code></pre></div>

<p data-nodeid="3856">在使用 CheckAccess 组件的时候，我们将函数放在 checkTaget 中传入组件即可，见下面代码：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="js"><ol><li><div class="code-word">&lt;CheckAccess
</div></li><li><div class="code-word">    checkTaget={(props) =&gt; {
</div></li><li><div class="code-word">      <span class="hljs-keyword">const</span> { isAccessible } = props;
</div></li><li><div class="code-word">      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChildComponent</span> {<span class="hljs-attr">...props</span>} <span class="hljs-attr">isAccessible</span>=<span class="hljs-string">{isAccessible}</span> /&gt;</span></span>
</div></li><li><div class="code-word">    }}
</div></li><li><div class="code-word">  /&gt;
</div></li></ol></code></pre></div>

<p data-nodeid="3858">像这样使用 render props，也是完全可以的。</p>
<h4 data-nodeid="3859">理解 render props 的灵活之处</h4>
<p data-nodeid="3860">读到这里，你不免会产生这样的困惑：高阶组件和 render props 都能复用逻辑，那我到底用哪个好呢？</p>
<p data-nodeid="3861">这里我先给出结论：render props 将是你更好的选择，因为它<strong data-nodeid="4025">更灵活</strong>。这“更灵活”从何说起呢？</p>
<p data-nodeid="3862">render props 和高阶组件一个非常重要的区别，在于对数据的处理上：在高阶组件中，目标组件对于数据的获取没有主动权，<strong data-nodeid="4035">数据的分发逻辑全部收敛在高阶组件的内部</strong>；而在 render props 中，除了父组件可以对数据进行分发处理之外，<strong data-nodeid="4036">子组件也可以选择性地对数据进行接收</strong>。</p>
<p data-nodeid="3863">这样说你可能会觉得有点抽象，我举个例子：假如说我们现在多出一个 F 组件，它同样需要 checkUserAccess 这段逻辑。但是这个 F 组件是一个老组件，它识别不了 props.isAccessible，只认识 props.isValidated。带着这个需求，我们先来看看高阶组件怎么解决问题。原有的高阶组件逻辑是下面这样的：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">// 假设 checkUserAccess 已经在 utils 文件中被封装为了一段独立的逻辑
</div></li><li><div class="code-word">import checkUserAccess from './utils
</div></li><li><div class="code-word">// 用高阶组件包裹目标组件
</div></li><li><div class="code-word">const withCheckAccess = (WrappedComponent) =&gt; {
</div></li><li><div class="code-word">    // 这部分是通用的逻辑：判断用户身份是否合法
</div></li><li><div class="code-word">    const isAccessible = checkUserAccess()  
</div></li><li><div class="code-word">    // 将 isAccessible（是否合法） 这个信息传递给目标组件
</div></li><li><div class="code-word">    const targetComponent = (props) =&gt; (
</div></li><li><div class="code-word">        &lt;div className="wrapper-container"&gt;
</div></li><li><div class="code-word">            &lt;WrappedComponent {...props} isAccessible={isAccessible} /&gt;
</div></li><li><div class="code-word">        &lt;/div&gt;
</div></li><li><div class="code-word">    );
</div></li><li><div class="code-word">    return targetComponent;
</div></li><li><div class="code-word">};
</div></li></ol></code></pre></div>
<p data-nodeid="3865">它会不由分说地给所有组件安装上 isAccessible 这个变量。要想让它适配 F 组件的逻辑，最直接的一个思路就是在 withCheckAccess 中增加一个组件类型的判断，一旦判断出当前入参是 F 组件，就专门将 isAccessible 改名为 isValidated。</p>
<p data-nodeid="3866">这样做虽然能够暂时解决问题，但这并不是一个灵活的解法：假如需要改属性名的组件越来越多，那么 withCheckAccess 内部将不可避免变得越来越臃肿，长此以往将难以维护。</p>
<p data-nodeid="3867">事实上，在软件设计模式中，有一个非常重要的原则，叫“<strong data-nodeid="4049">开放封闭原则</strong>”。一个好的模式，应该尽可能做到<strong data-nodeid="4050">对拓展开放，对修改封闭</strong>。</p>
<p data-nodeid="3868">当我们发现 withCheckAccess 的内部逻辑需要频繁地跟随需求的变化而变化时，此时就应该提高警惕了，因为这已经违反了“对修改封闭”这一原则。</p>
<p data-nodeid="3869"><strong data-nodeid="4056">处理同样的需求，render props 就能够在保全“开放封闭”原则的基础上，帮我们达到目的</strong>。</p>
<p data-nodeid="3870">前面说过，在 render props 中，除了父组件可以对数据进行分发处理之外，<strong data-nodeid="4062">子组件也可以选择性地对数据进行接收</strong>。这就意味着我们可以在新增的 F 组件相关的逻辑中把数据适配这件事情给做掉（如下面代码所示），而不会影响老的 CheckAccess 组件中的逻辑。</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">&lt;CheckAccess&gt;
</div></li><li><div class="code-word">  {
</div></li><li><div class="code-word">    (props) =&gt; {
</div></li><li><div class="code-word">      const { isAccessible } = props;
</div></li><li><div class="code-word">      return &lt;ChildComponent {...props} isValidated={isAccessible} /&gt;
</div></li><li><div class="code-word">    }
</div></li><li><div class="code-word">  }
</div></li><li><div class="code-word">&lt;/CheckAccess&gt;
</div></li></ol></code></pre></div>
<p data-nodeid="3872">这样一来，不管你新来的组件有多少个，需要变更的属性名有多少个，影响面都会被牢牢地控制在“新增逻辑”这个范畴里。契合了“开放封闭”原则的 render props 模式显然比高阶组件灵活多了。</p>
<h3 data-nodeid="3873">有状态组件与无状态组件：“单一职责”原则在组件设计模式中的实践</h3>
<h4 data-nodeid="3874">什么是“单一职责”原则？</h4>
<p data-nodeid="3875">单一职责原则又叫“单一功能原则”，它指的是一个类或者模块应该有且只有一个改变的原因。通俗来讲，就是说咱们的组件功能要尽可能地聚合，不要试图让一个组件做太多的事情。</p>
<h4 data-nodeid="3876">什么是有状态组件？什么是无状态组件？</h4>
<p data-nodeid="3877">无状态组件这个概念我们在第 06 讲中已经介绍过了，这里简单复习一下：</p>
<blockquote data-nodeid="3878">
<p data-nodeid="3879">函数组件顾名思义，就是以函数的形态存在的 React 组件。早期并没有 React-Hooks 的加持，函数组件内部无法定义和维护 state，因此它还有一个别名叫“无状态组件”。</p>
</blockquote>
<p data-nodeid="3880">如下面代码所示，就是一个典型的无状态组件：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word"><span class="hljs-function">function <span class="hljs-title">DemoFunction</span><span class="hljs-params">(props)</span> </span>{
</div></li><li><div class="code-word">  <span class="hljs-keyword">const</span> { text } = <span class="hljs-function">props
</span></div></li><li><div class="code-word">  <span class="hljs-title">return</span> <span class="hljs-params">(
</span></div></li><li><div class="code-word">    &lt;div className=<span class="hljs-string">"demoFunction"</span>&gt;
</div></li><li><div class="code-word">      &lt;p&gt;{`function 组件所接收到的来自外界的文本内容是：[${text}]`}&lt;/p&gt;
</div></li><li><div class="code-word">    &lt;/div&gt;
</div></li><li><div class="code-word">  );
</div></li><li><div class="code-word">}
</div></li></ol></code></pre></div>
<p data-nodeid="3882">无状态组件不一定是函数组件，不维护内部状态的类组件也可以被认为是无状态组件。<br>
相比之下，能够在组件内部维护状态、管理数据的组件，就是“有状态组件”。</p>
<h4 data-nodeid="3883">为何需要剥离有状态组件和无状态组件？</h4>
<p data-nodeid="3884">有状态组件和无状态组件有很多别名，有的书籍里也会管它们叫“容器组件”和“展示组件”，甚至“聪明组件”和“傻瓜组件”。不管叫啥，核心目的就一个——把数据处理和界面渲染这两个工作剥离开来。</p>
<p data-nodeid="3885">为什么要这样做？别忘了，React 的核心特征是“数据驱动视图”，我们经常用下图的公式来表达它的工作模式：</p>
<p data-nodeid="12094" class="te-preview-highlight"><img src="https://s0.lgstatic.com/i/image/M00/8C/12/Ciqc1F_lfZ6AJTqZAAA2ThydXNs337.png" alt="Lark20201225-133324.png" data-nodeid="12097"></p>

<p data-nodeid="3887">因此对一个 React 组件来说，它做的事情说到底无外乎是这两件：</p>
<ol data-nodeid="3888">
<li data-nodeid="3889">
<p data-nodeid="3890">处理数据（包括数据的获取、格式化、分发等）</p>
</li>
<li data-nodeid="3891">
<p data-nodeid="3892">渲染界面</p>
</li>
</ol>
<p data-nodeid="3893">我们当然也可以在一个组件里面做完这两件事情，但这样不够优雅。</p>
<p data-nodeid="3894">按照“单一职责”的原则，我们应该将数据处理的逻辑和界面渲染的逻辑剥离到不同的组件中去，这样功能模块的组合将会更加灵活，也会更加有利于逻辑的复用。此外，单一职责还能够帮助我们尽可能地控制变更范围，降低代码的维护成本：当数据相关的逻辑发生变化时，我们只需要去修改有状态组件就可以了，无状态组件将完全不受影响。</p>
<h3 data-nodeid="3895">Why Hooks：设计模式解决不了所有的问题</h3>
<p data-nodeid="3896">设计模式虽好，但它并非万能。</p>
<p data-nodeid="3897">就 React 来说，无论是高阶组件，还是 render props，两者的出现都是为了弥补类组件在“逻辑复用”这个层面的不灵活性。它们各自都有着自己的不足，这些不足包括但不限于以下几点：</p>
<ol data-nodeid="3898">
<li data-nodeid="3899">
<p data-nodeid="3900">嵌套地狱问题，当嵌套层级过多后，数据源的追溯会变得十分困难</p>
</li>
<li data-nodeid="3901">
<p data-nodeid="3902">较高的学习成本</p>
</li>
<li data-nodeid="3903">
<p data-nodeid="3904">props 属性命名冲突问题</p>
</li>
<li data-nodeid="3905">
<p data-nodeid="3906">......</p>
</li>
</ol>
<p data-nodeid="3907">总体来看，“HOC/render props+类组件”这种研发模式，还是不够到位。当设计模式解决不了问题时，我们本能地需要从编程模式上寻找答案。于是便有了如今大家在 React 中所看到的 “函数式编程”对“面向对象”的补充（并且大有替代之势），有了今天我们所看到的“一切皆可 Hooks”的大趋势。</p>
<p data-nodeid="3908"><strong data-nodeid="4103">现在，当我们想要去复用一段逻辑时，第一反应肯定不是“高阶函数”或者“render props”，而应该是“</strong><a href="https://zh-hans.reactjs.org/docs/hooks-custom.html#gatsby-focus-wrapper" data-nodeid="4098">自定义 Hook</a><strong data-nodeid="4104">”</strong>。Hooks 能够很好地规避掉旧时类组件中各种设计模式带来的弊端，比如说它不存在嵌套地狱，允许属性重命名、允许我们在任何需要它的地方引入并访问目标状态等。由此可以看出，一个好的编程模式可以帮我们节约掉大量“打补丁”式地学习各种组件设计模式的时间。框架设计越合理，开发者的工作就越轻松。</p>
<h3 data-nodeid="3909">总结</h3>
<p data-nodeid="3910">本讲，我们围绕“React 组件设计模式”这一专题进行学习。在认识高阶组件、render props 两种经典设计模式的同时，也对“单一职责”“开放封闭”这两个重要的软件设计原则形成了初步的认识。</p>
<p data-nodeid="3911">软件领域没有银弹，就算有，也不可能是设计模式。通过本讲的学习，相信你在认识设计模式的利好之余，也认识到了它的局限性。在此基础上，相信你会对 React-Hooks 及其背后的“函数式编程”思想建立更加强烈的正面认识。</p>
<p data-nodeid="3912">行文至此，整个 React 专栏的知识讲解部分就结束了。相信不少同学在学习完毕之后，都会对 React 的运行机制，甚至前端框架这个领域产生强烈的兴趣。在下一讲，我将分享自己对框架的一些理解，也会借机和你聊聊前不久刚刚推出的 React 17，我们不见不散呀！</p></div></div></div> <div data-v-1605a430="" class="el-dialog__wrapper" style="display: none;"><div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog el-dialog--center show-img-wrap" style="margin-top: 15vh; width: 60%;"><div class="el-dialog__header"><span class="el-dialog__title"></span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><!----></div></div></div> <div data-v-daa3f53a="" class="fix-box-wrap"><div data-v-daa3f53a="" class="mini-player-wrap"><div data-v-2ee8fa4a="" data-v-daa3f53a="" class="player-container-wrap"><div data-v-2ee8fa4a="" class="player"><div data-v-2ee8fa4a="" class="close-btn"></div> <div data-v-2ee8fa4a="" class="content"><div data-v-2ee8fa4a="" class="theme single-line narrow-theme">
          
      </div> <div data-v-2ee8fa4a="" class="time-course"><div data-v-2ee8fa4a="" class="time">
              00:00<span data-v-2ee8fa4a="" class="line"></span></div> <span data-v-2ee8fa4a="" class="course-name single-line">深入浅出搞定 React</span></div></div> <div data-v-2ee8fa4a="" class="player-container"><div data-v-2ee8fa4a="" class="play-btn"><div data-v-2ee8fa4a="" class="play-status playing"></div></div> <div data-v-2ee8fa4a="" class="play-next next-unable"></div></div></div></div></div> <!----></div> <div data-v-daa3f53a="" class="right-content-space"></div> <div data-v-daa3f53a="" class="right-content-message"><div data-v-4bc80e00="" data-v-daa3f53a="" class="message pc-message"><div data-v-4bc80e00="" class="message-topic"><div data-v-4bc80e00="" class="message-topic-title">
      精选留言
      </div> <div data-v-4bc80e00="" class="message-topic-write pointer btn-pc-css"><img data-v-4bc80e00="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAABDlBMVEUAAAAAAAArKyscHBwrKyswMDAtLS0xMTEuLi4rKyszMzMzMzMyMjIvLy8zMzMxMTEvLy8tLS0zMzMyMjIxMTEwMDAyMjIwMDAzMzMxMTEwMDAxMTEyMjIzMzMyMjIzMzMxMTEyMjIyMjIyMjIyMjIyMjIyMjIzMzMyMjIzMzMyMjIyMjIzMzMyMjIzMzMyMjIyMjIzMzMyMjIyMjIzMzMyMjIyMjIyMjIzMzMyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIzMzMzMzMyMjIzMzMzMzMzMzMzMzMyMjIzMzMyMjIzMzMzMzMzMzMyMjIzMzMzMzMzMzMyMjIzMzMzMzMyMjIzMzMMFbxYAAAAWXRSTlMAAwYJDBARFRYYHiMkJigqKy0tMzk7PUBBQ0VJTFBSVVlbXGFla3B0dXh/hYeKjY+QkZSVlpiao6ausbK3u73DxcfIys3O0NPY3N3g4uXm6Ovu8fX3+Pr7/Z2GrlIAAAEvSURBVCjPdZJrT8JAEEVvC4ggqAiKiq0vlLa8tIoWBQFBRK0yIrTM//8jfighLWzPh8nNnsnMZrPAAlkxe+Q41DMVGUGiOrHbbzYazb7LpEf9TiVuKzEvx5Q2k7pUUo0HOX9vbsA1aZFNvl9ZI9+x6SWdq1ijyjoApGcWBFizNIAWxUUyTi0gwyUIKXEGZTchlgm3jG4HAAq2XQhWoNMF1QHAZraDFagTHCNMGg4mlbCxlT+MLIRgjWB9hTjp28IZ74vlIV8gQk9i2fqNABqfiJzKVwDk4Xhr3e3QmwQAKfrcXnUp+yfppSzRadCdT2hv2TfkS5/Kv3Av6fsWjgHk1d3NZFa9HfFYk/xzpkb0gT3mr9eR4JLp88f85qCoacXj2NrNp2wfhb0x3h83BKf/ogM3zcQrR7gAAAAASUVORK5CYII=" class="message-topic-write-icon">
      写留言
  </div></div> <!----> <!---->  <div data-v-4bc80e00="" class="message-list"><div data-v-4bc80e00="" class="message-list-title"><div data-v-4bc80e00="" class="message-list-title-left"><!----> <div data-v-4bc80e00="" class="message-list-title-left-name">
              **飞
          </div></div> <div data-v-4bc80e00="" class="message-list-title-right"><!----> <img data-v-4bc80e00="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=" alt="right-icon" class="message-list-title-right-icon"> <div data-v-4bc80e00="" class="message-list-title-right-praise">
              1
          </div></div></div> <div data-v-4bc80e00="" class="message-list-container"><div data-v-4bc80e00="" class="message-list-content">好！不见不散！</div> <!----></div> <!----> <!----> <!----></div><div data-v-4bc80e00="" class="message-list"><div data-v-4bc80e00="" class="message-list-title"><div data-v-4bc80e00="" class="message-list-title-left"><!----> <div data-v-4bc80e00="" class="message-list-title-left-name">
              **雄
          </div></div> <div data-v-4bc80e00="" class="message-list-title-right"><!----> <img data-v-4bc80e00="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=" alt="right-icon" class="message-list-title-right-icon"> <div data-v-4bc80e00="" class="message-list-title-right-praise">
              1
          </div></div></div> <div data-v-4bc80e00="" class="message-list-container"><div data-v-4bc80e00="" class="message-list-content">要结束了，花了13个小时，第二节还要花一倍时间感觉</div> <!----></div> <div data-v-4bc80e00="" class="message-list-replay"><div data-v-4bc80e00="" class="borleft"></div> <span data-v-4bc80e00="" class="message-list-replay-name">编辑回复：</span>
      小编给你打call，加油哦！
  </div> <!----> <!----></div><div data-v-4bc80e00="" class="message-list"><div data-v-4bc80e00="" class="message-list-title"><div data-v-4bc80e00="" class="message-list-title-left"><!----> <div data-v-4bc80e00="" class="message-list-title-left-name">
              console_man
          </div></div> <div data-v-4bc80e00="" class="message-list-title-right"><!----> <img data-v-4bc80e00="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=" alt="right-icon" class="message-list-title-right-icon"> <div data-v-4bc80e00="" class="message-list-title-right-praise">
              
          </div></div></div> <div data-v-4bc80e00="" class="message-list-container"><div data-v-4bc80e00="" class="message-list-content">期待修言大佬的更多文章</div> <!----></div> <!----> <!----> <!----></div><div data-v-4bc80e00="" class="message-list"><div data-v-4bc80e00="" class="message-list-title"><div data-v-4bc80e00="" class="message-list-title-left"><!----> <div data-v-4bc80e00="" class="message-list-title-left-name">
              **2689
          </div></div> <div data-v-4bc80e00="" class="message-list-title-right"><!----> <img data-v-4bc80e00="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=" alt="right-icon" class="message-list-title-right-icon"> <div data-v-4bc80e00="" class="message-list-title-right-praise">
              
          </div></div></div> <div data-v-4bc80e00="" class="message-list-container"><div data-v-4bc80e00="" class="message-list-content">干货满满</div> <!----></div> <!----> <!----> <!----></div><div data-v-4bc80e00="" class="message-list"><div data-v-4bc80e00="" class="message-list-title"><div data-v-4bc80e00="" class="message-list-title-left"><!----> <div data-v-4bc80e00="" class="message-list-title-left-name">
              **森
          </div></div> <div data-v-4bc80e00="" class="message-list-title-right"><!----> <img data-v-4bc80e00="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=" alt="right-icon" class="message-list-title-right-icon"> <div data-v-4bc80e00="" class="message-list-title-right-praise">
              
          </div></div></div> <div data-v-4bc80e00="" class="message-list-container"><div data-v-4bc80e00="" class="message-list-content">赞</div> <!----></div> <!----> <!----> <!----></div><div data-v-4bc80e00="" class="message-list"><div data-v-4bc80e00="" class="message-list-title"><div data-v-4bc80e00="" class="message-list-title-left"><!----> <div data-v-4bc80e00="" class="message-list-title-left-name">
              **宇
          </div></div> <div data-v-4bc80e00="" class="message-list-title-right"><!----> <img data-v-4bc80e00="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=" alt="right-icon" class="message-list-title-right-icon"> <div data-v-4bc80e00="" class="message-list-title-right-praise">
              
          </div></div></div> <div data-v-4bc80e00="" class="message-list-container"><div data-v-4bc80e00="" class="message-list-content ellipsis">作者大大，hoc和render props比较的例子感觉不是很信服。例子中render props相比于hoc多了一个函数中间层，hoc是子组件与父组件直接“接触”，自然没有修改的空间，如果hoc传入的参数也给子组件包一层中间函数，面对变化也符合开闭原则了，只能说render props的写法多了一个这样的约束。有没有更好的例子说明hoc控制力不如render props呢？</div> <div data-v-4bc80e00="" class="message-list-expand">
          全部
      </div></div> <div data-v-4bc80e00="" class="message-list-replay"><div data-v-4bc80e00="" class="borleft"></div> <span data-v-4bc80e00="" class="message-list-replay-name">讲师回复：</span>
      高阶组件指的就是参数为组件，返回值为新组件的函数。hoc传入的参数是组件，组件给子组件套一层，那么作为入参的这个组件自身是不是还是要和hoc亲密接触？文中的例子其实足够了。思辨是药，过度思辨是毒药，多在代码里体验一下就知道其中滋味了。
  </div> <!----> <!----></div> <!----></div> <div data-v-7580e7ec="" data-v-daa3f53a="" class="el-dialog__wrapper" style="display: none;"><div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog el-dialog--center" style="margin-top: 25vh; width: 400px;"><div class="el-dialog__header"><span class="el-dialog__title"></span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><!----></div></div> <div data-v-e31d0af2="" data-v-daa3f53a="" class="el-dialog__wrapper" style="display: none;"><div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog el-dialog--center" style="margin-top: 10vh; width: 500px;"><div class="el-dialog__header"><span class="el-dialog__title"></span><!----></div><!----><!----></div></div></div></div></div></div></div> <video data-v-537ed502="" id="video" controls="controls" x-webkit-airplay="true" x5-video-player-fullscreen="true" preload="auto" playsinline="true" webkit-playsinline="" x5-video-player-type="h5" class="video vjs-default-skin"><source data-v-537ed502="" type="application/x-mpegURL" src=""></video> <!----> <div><!----> <!----> <!----> <div data-v-51f7ab0d="" class="vux-alert purchase-alert-container" current-environment="PC"><div class="vux-x-dialog"><div class="weui-mask" style="display: none;"></div> <div class="weui-dialog" style="display: none;"><div class="weui-dialog__hd"><strong class="weui-dialog__title">购买成功</strong></div> <div class="weui-dialog__bd"><div data-v-51f7ab0d="" class="purchase-alert-content"><img data-v-51f7ab0d="" src="data:image/png;base64,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" alt="购买成功" class="purchase-success-img"></div></div> <div class="weui-dialog__ft"><a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">我知道了</a></div></div></div></div> <!----> <!----> <!----> <!----> <div data-v-0b91fc6d="" class="pc-all-dirlog-wrap"><div data-v-467635e0="" data-v-0b91fc6d="" class="el-dialog__wrapper sale-pc-all-dirlog" style="display: none;"><div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog el-dialog--center" style="margin-top: 25vh; width: 500px;"><div class="el-dialog__header"><span class="el-dialog__title"></span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><!----></div></div></div></div></div>
<!-- 如需在IE8、9浏览器中初始化播放器，浏览器需支持Flash并在页面中引入 -->
<!--[if lt IE 9]>
<script src="//imgcache.qq.com/open/qcloud/video/tcplayer/ie8/videojs-ie8.js"></script>
<![endif]-->

<script id="_lgpassport_" data-css-site="0" data-css-popup="0" type="text/javascript" src="https://passport.lagou.com/static/js/passport.js"></script>

<script type="text/javascript">
//后端变量赋值
  window.courseInfo = {"id":510,"courseCId":"","courseName":"深入浅出搞定 React","teachers":[{"id":512,"teacherName":"修言","position":"高级前端工程师","teacherHeadPicUrl":"https://s0.lgstatic.com/i/image/M00/5C/83/CgqCHl-BnE6Adj2iAAAI-hEnRgU445.png","description":"<p><span data-shimo-docs=\"[[20,&quot;他是 React 重度用户，对 React 源码、底层原理及周边生态有着较为深入的探究和理解。早期专注于性能优化和前端工程化，曾将线上大型应用性能提升率做到 40%，并基于 React 打造过团队新基建。现在在一线电商集团专攻前端框架与底层链路设计，同时，作为多年一线前端面试官，积累了丰富的面试经验。&quot;,&quot;0:\\&quot;%23494949\\&quot;&quot;]]\"></span></p><p line=\"ydpB\" linespacing=\"115\"><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;\">他是 React 重度用户，对 React 源码、底层原理及周边生态有着较为深入的探究和理解。早期专注于性能优化和前端工程化，曾将线上大型应用性能提升率做到 40%，并基于 React 打造过团队新基建。现在在某一线互联网大厂专攻前端框架与底层链路设计，同时，作为多年一线前端面试官，积累了丰富的面试经验。</span></p><p><br/></p><p><br/></p>"}],"totalCourseTime":20,"totalDuration":1,"sales":13477,"price":"98","priceTag":"立即购买","discounts":"98","discountsTag":"立即购买","courseImgUrl":"https://s0.lgstatic.com/i/image/M00/5C/83/CgqCHl-BnE6Adj2iAAAI-hEnRgU445.png","sellGoodsId":556,"sellGoodsPriceId":47335,"lgCoinPrice":98,"isBuy":false,"isFavorite":false,"isNewDes":"","seoDescription":"本专栏基于源码提炼出来原理，所涉及的原理，可以帮助你解决掉实际工作中的大多数疑难杂症，也可以 match 上大厂对资深前端工程师的技术深度的要求。在广度方面，专栏涵盖了对基本问题的较为深入和完善的讲解，涵盖了 React 周边生态及生产实践，足以帮助你构建起“表象——原理——应用”的完整学习链路。","seoKeywords":"前端开发,React,React-Hooks,栈调,Fiber,setState,Redux,Facebook,源码分析,技术栈,JS,ES2015,React-Router,DOM,React Native,state,props,diff,umi,Suspense,React.js,batchUpdate,setState,\tWeb ,前端,UI,HTML,jsx,ShoppingList,Props","seoTitle":"深入浅出搞定 React - 高级前端工程师 - 拉勾教育","shareTitle":"戳此，带你吃透 React 知识链路和底层逻辑","shareDescription":"帮你构建起“表象、原理、应用”的完整学习链路。","brief":"掌握 React 知识链路和底层逻辑","courseListImg":"https://s0.lgstatic.com/i/image/M00/5D/09/Ciqc1F-D0-OAZTxlAABYS9gye8s357.png","courseType":1,"previewFirstField":"共22讲","previewSecondField":"已全部更新","joinMember":false,"freeForVip":true,"decorateId":275,"successShowType":"COURSE_COMMUNITY","weixinQrUrl":"https://s0.lgstatic.com/i/image/M00/59/46/Ciqc1F9xW1eAEPp6AAS4A4rXd4I423.png","appDecorateId":0,"recruitAppDecorateId":0,"joinSeckill":false,"seckillRemainSeconds":"0","hasActivityTask":false,"enterpriseDecorateId":275,"hasCoupon":false,"hasActivityGroup":false,"synEnterprise":true,"classCourseType":0};
      window.isLogin = true;
      window.sellGoodsPriceId = -1;
      window.orderToken = '6b62455562524a2abd56ef262bd463b1';
      window.userInfo = {"id":20015885,"nickName":"张熙远","isActive":0,"portrait":"https://s0.lgstatic.com/common/image/pc/default_boy_headpic1.png"};
      window.enterNewPage = false;
          window.activityButtonInfo = null;
  
</script>
<script type="text/javascript" src="https://s21.lgstatic.com/growth/activity/20201206/1607238135888.js" crossorigin=""></script>

<!-- <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script> -->

<!---->
<!---->





<script type="text/javascript" src="https://s1.lgstatic.com/kw-web-fed/js/dll/vendor.424fdf064e46228ef60d.dll.js" crossorigin="anonymous"></script>
<script src="https://s0.lgstatic.com/kw-web-fed/js/runtime~course/main.807e6d9.js" crossorigin="anonymous"></script><script src="https://s0.lgstatic.com/kw-web-fed/js/lazy-load/common.29b3b88.js" crossorigin="anonymous"></script><script src="https://s0.lgstatic.com/kw-web-fed/js/lazy-load/vendors~404/main~500/main~activity-collage/main~activity/main~activity818/main~algorithm-shock/main~~4141e3fd.69f9030.js" crossorigin="anonymous"></script><script src="https://s0.lgstatic.com/kw-web-fed/js/lazy-load/course/main.9a9f2f8.js" crossorigin="anonymous"></script><div class="lg-pay lg-recharge-pay-container">
<div class="lg-pay-container recharge-pay-container">
  <div class="lg-pay-close"></div>
  <div class="modal-payment-title">
      <i class="icon-hd"></i>
      <span class="title-text">已开启安全支付</span>
  </div>
  <div class="amount-coupon"></div>
  <div class="recharge-pay-title">请选择支付方式</div>
  <div class="pay-methods">
              <div class="pay-method-list">
                  <div class="lg-pay-select lg-pay-select-ali pay-method-item pay-ali active">
                      <i class="pay-icon-ali"></i>
                      <span class="pay-method-name">支付宝支付</span>
                  </div>
                  <div class="lg-pay-select lg-pay-select-wx pay-method-item pay-wx ">
                      <i class="pay-icon-wx"></i>
                      <span class="pay-method-name">微信支付</span>
                  </div>
              </div>
          </div>
          <div class="lg-pay-qrcode lg-pay-qrcode-wx">
              <canvas id="wxQrcode"></canvas>
          </div>
          <div class="lg-pay-qrcode lg-pay-qrcode-ali" style="display:block">
              <canvas id="aliQrcode"></canvas>
          </div>
         
          <div class="pay-qrcode-status">
              <span>
                  <span class="left-text">未支付成功，请重新扫码支付</span>
                  <div class="pay-tips">
                    <span>使用支付宝扫码支付</span>
                    <a class="link">
                      我已支付
                    </a>
                  </div>
              </span>
          </div>
          <div class="pay-notes">
              <span>付费即表示同意<a href="https://activity.lagou.com/app/business/service-agreement.html" }="" target="_blank">《拉勾网在线增值服务协议》</a></span>
          </div>
</div>
</div><div class="lg-pay-recharge" style="display: none;">
<div class="lg-pay-container lg-pay-recharge-confirm">
  <div class="lg-pay-close"></div>
  <div class="recharge-title">勾豆充值</div>
  <div>
      <div class="recharge-label">填写充值勾豆数量</div>
      <div class="recharge-amount">
          <input type="text" class="amount input" min="0" max="9999" value="100">
      </div>
  </div>
  <div class="recharge-tips">
      需支付：<span class="count-show">100元</span><span class="recharge-description">（1元=1勾豆）</span>
  </div>
  <div class="recharge-btn">立即充值</div>
</div>
</div><div class="lg-pay-recharge" style="display: none;">
<div class="lg-pay-container lg-pay-recharge-confirm">
  <div class="lg-pay-close"></div>
  <div class="recharge-title">勾豆充值</div>
  <div>
      <div class="recharge-label">填写充值勾豆数量</div>
      <div class="recharge-amount">
          <input type="text" class="amount input" min="0" max="9999" value="100">
      </div>
  </div>
  <div class="recharge-tips">
      需支付：<span class="count-show">100元</span><span class="recharge-description">（1元=1勾豆）</span>
  </div>
  <div class="recharge-btn">立即充值</div>
</div>
</div><script type="text/javascript" crossorigin="anonymous" src="https://kaiwu.lagou.com/upload/oss.js?v=1010"></script>

<div class="xl-chrome-ext-bar" id="xl_chrome_ext_{4DB361DE-01F7-4376-B494-639E489D19ED}" style="display: none;">
<div class="xl-chrome-ext-bar__logo"></div>

<a id="xl_chrome_ext_download" href="javascript:;" class="xl-chrome-ext-bar__option">下载视频</a>
<a id="xl_chrome_ext_close" href="javascript:;" class="xl-chrome-ext-bar__close"></a>
</div><script></script><div id="cboxOverlay" style="display: none;"></div><div id="colorbox" class="" role="dialog" tabindex="-1" style="display: none;"><div id="cboxWrapper"><div><div id="cboxTopLeft" style="float: left;"></div><div id="cboxTopCenter" style="float: left;"></div><div id="cboxTopRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxMiddleLeft" style="float: left;"></div><div id="cboxContent" style="float: left;"><div id="cboxTitle" style="float: left;"></div><div id="cboxCurrent" style="float: left;"></div><button type="button" id="cboxPrevious"></button><button type="button" id="cboxNext"></button><button id="cboxSlideshow"></button><div id="cboxLoadingOverlay" style="float: left;"></div><div id="cboxLoadingGraphic" style="float: left;"></div></div><div id="cboxMiddleRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxBottomLeft" style="float: left;"></div><div id="cboxBottomCenter" style="float: left;"></div><div id="cboxBottomRight" style="float: left;"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none;"></div></div></body>