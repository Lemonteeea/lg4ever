<body style="font-size: 15px; height: 100%; width: 100%; background-color: rgb(237, 237, 237);"><h1 style="display: none">深入浅出搞定 React - 拉勾教育</h1>
    
  <meta content="前端开发,React,React-Hooks,栈调,Fiber,setState,Redux,Facebook,源码分析,技术栈,JS,ES2015,React-Router,DOM,React Native,state,props,diff,umi,Suspense,React.js,batchUpdate,setState,	Web ,前端,UI,HTML,jsx,ShoppingList,Props" name="keywords">

  <meta content="本专栏基于源码提炼出来原理，所涉及的原理，可以帮助你解决掉实际工作中的大多数疑难杂症，也可以 match 上大厂对资深前端工程师的技术深度的要求。在广度方面，专栏涵盖了对基本问题的较为深入和完善的讲解，涵盖了 React 周边生态及生产实践，足以帮助你构建起“表象——原理——应用”的完整学习链路。" name="description">

  <title>深入浅出搞定 React - 高级前端工程师 - 拉勾教育</title>
<meta name="apple-mobile-web-app-title" content="深入浅出搞定 React - 高级前端工程师 - 拉勾教育">

  <script>
// 全局token变量，防CSRF，防重复提交
window.X_Anti_Forge_Code = '';
window.X_Anti_Forge_Token = '';
var mds = {
  userInfo: {
      shortName: "",
  }
}
window.mds = mds;
</script>
<script type="text/javascript" src="//g.alicdn.com/AWSC/AWSC/awsc.js"></script>
<script src="//s20.lgstatic.com/components/edu-fe/edu-pay-component/1.0.12/main.js"></script>
<script>
  window.userInfo = {
      userId: '20015885',
  };
  //风控系统
  (function() {
      console.log(window);
      window._smReadyFuncs = [];
      window.SMSdk = {
          ready: function(fn) {
              fn && _smReadyFuncs.push(fn);
          }
      };
  // 1. 通用配置项
      window._smConf = {
          organization: 'uTuOLHj2zLGJgglbtLOC',            //必填，组织标识，邮件中organization项
          staticHost: 'static.fengkongcloud.com'  //必填, 设置JS-SDK文件域名

      //2.连接海外机房特殊配置项，仅供设备数据上报海外机房客户使用
      //
      // 2.1 业务机房在国内
      //     1) 用户分布：国内（默认设置）
      // apiHost:'fp-it.fengkongcloud.com'
  //      2) 用户分布：全球
  //  apiHost:'fp-it-acc.fengkongcloud.com'
  //
  // 2.2 业务机房在欧美
  //    1) 用户分布：欧美
  // apiHost: 'fp-na-it.fengkongcloud.com'
  //    2) 用户分布：全球
  // apiHost: 'fp-na-it-acc.fengkongcloud.com'
  //
  //2.3 业务机房在东南亚
  //   1) 用户分布：东南亚
  // apiHost:'fp-sa-it.fengkongcloud.com'
  //   2) 用户分布：全球
  // apiHost:'fp-sa-it-acc.fengkongcloud.com'

  // 2.4 私有化特殊配置
  // staticHost: 'xxxxxx';  // 私有化部署的JS-SDK文件域名
  // apiHost: 'xxxxxx';  // 私有化部署的服务域名

      };

      var url = (function () {
          var originHost = 'static2.fengkongcloud.com';
          var isHttps = document.location.protocol === 'https:';
          var protocol = isHttps ? 'https://' : 'http://';
          var fpJsPath = '/fpv2.js';
          var url =  protocol + _smConf.staticHost + fpJsPath;
          var ua = navigator.userAgent.toLowerCase();
          var isWinXP = /windows\s(?:nt\s5.1)|(?:xp)/.test(ua);
          var isLowIE = /msie\s[678]\.0/.test(ua);

          if (isHttps && isWinXP && isLowIE) {
              url = protocol + originHost + fpJsPath;
          }

          return url;
      })();
      var sm = document.createElement('script');
      var s = document.getElementsByTagName('script')[0];
      sm.src = url;
      s.parentNode.insertBefore(sm, s);
  })();
  //阿里云风控系统
  var uabModule;
  var webUmidToken;
  //人机识别模块，只需初始化一次
  AWSC.use("uab", function (state, uab) {
      if(state === "loaded") {
          uabModule = uab;
      }
  });
  //设备指纹模块，得到设备token，只需初始化一次
  AWSC.use("um", function (state, um) {
      if(state === "loaded") {
          um.init({
              //appName请直接使用'saf-aliyun-com'
              appName: 'saf-aliyun-com',
          }, function (initState, result) {
              if(initState === 'success') {
                  webUmidToken = result.tn;
              }
          });
      }
  });
/////
  function dealSmDeviceId(cb) {
      var smTimeoutTime = 200;
      var smDeviceId = '';
      var smDeviceIdReady = false;
      var smTimer = setTimeout(function() {
          smDeviceId = SMSdk.getDeviceId ? SMSdk.getDeviceId() : smDeviceId;
          if (!smDeviceIdReady && smDeviceId) {
              smDeviceIdReady = true;
              //执行业务逻辑
              cb && cb(smDeviceId);
          }
      }, smTimeoutTime);

      SMSdk.ready(function() {
          smDeviceId = SMSdk.getDeviceId ? SMSdk.getDeviceId() : smDeviceId;
          clearTimeout(smTimer);

          if (!smDeviceIdReady && smDeviceId) {
              smDeviceIdReady = true;
              //执行业务逻辑
              cb && cb(smDeviceId);
          }
      });
  };
  function getCookie(name){
      var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
      if(arr=document.cookie.match(reg)){
          return unescape(arr[2]);
      }else{
          return null;
      }
  }
  function getHost(){
      let host = window.location.host.split('.');
      if(host[1] && host[1] == 'lagou'){
         return true;
      }
      return false;
  }
  const getdeviceld = function (deviceId){
      if(deviceId){
          let data = [];
          data.push({channel: 1,thirdDeviceId:deviceId});
          data.push({channel: 2,thirdDeviceId: uabModule && uabModule.getUA() + ',' + webUmidToken});
          var expats=new Date();
          expats.setTime(expats.getTime() + 7 * 24 * 60 * 60 * 1000);
          if(getHost()){
              document.cookie = 'thirdDeviceIdInfo=' + escape(JSON.stringify(data)) + ';expires=' +expats.toGMTString()+';path=/;domain=.lagou.com;';
          }else{
              document.cookie = 'thirdDeviceIdInfo=' + escape(JSON.stringify(data)) + ';expires=' +expats.toGMTString()+';path=/;';
          }
      }else{
          dealSmDeviceId(getdeviceld)
      }
  }
  if(!getCookie('thirdDeviceIdInfo')){
      dealSmDeviceId(getdeviceld)
  }
  // Note: onepass h5无感本机认证
  // https://docs.geetest.com/onelogin/deploy/h5
  (function () {
      const isPc = !/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(window.navigator.userAgent)
      if (isPc) return
      // 网络判断方法
      function getNetworkType(){
          var common_cell = ['cellular', '2g', '3g', '4g', '5g','3G/2G'];
          var user_agent = navigator.userAgent.toLowerCase();
          var connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection ||{type: 'unknown'};
          var type;
          // 判断是否是微信内置浏览器
          var isWeixin = /micromessenger/.test(user_agent);
          if(isWeixin) {
              if(user_agent.indexOf('nettype') !== -1){
                  type = user_agent.match(/nettype\/\w+/) ? user_agent.match(/nettype\/\w+/)[0] : 'nettype/unknow';
                  type = type.replace('nettype/', '')
              }else {
                  var weixinType = {"network_type:wifi":"wifi","network_type:edge":"3G/2G","network_type:fail":"fail","network_type:wwan":"3G/2G"}
                  document.addEventListener("WeixinJSBridgeReady",function onBridgeReady(){
                      WeixinJSBridge.invoke('getNetworkType',{},function(e){
                          type = weixinType[e.err_msg];
                      });
                  });
              }
          }else {
              type = (connection && connection.type) || 'unknown';
          }
          // 对type 做统一处理
          if(type && common_cell.indexOf(type) !== -1){
              return 'cellular'
          }else if ( type === 'wifi'){
              return 'wifi'
          }
          return 'unknown'
      }
      var metaEle = document.createElement('meta')
      metaEle.content = 'always'
      metaEle.name = "referrer"
      document.head.appendChild(metaEle)
      var scriptEle = document.createElement('script')
      scriptEle.src = "https://s21.lgstatic.com/components/onepassh5/2.3.0/onepassh5.min.js"
      document.head.appendChild(scriptEle)
      scriptEle.onload = function () {
          console.log(GOP, 'GOP 加载成功')
          if (typeof GOP !== 'function') return
          var nettype = getNetworkType();
          // Note: onepass api h5场景只支持数据网络的场景
          var ispre = nettype === 'wifi'? false: true;
          window.OP_INSTANCE = new GOP({
              app_id: '000760cd4c8bb48a3860e5070ded2717', // 在极验后台获取，生成app_id后等待极验审核成功后生效
              timeout: 30000, // 超时时长，默认30000
              pre_init: ispre, // 是否初始化时获取运营商参数，默认为true。 建议开启避免影响认证的响应时间
          })
      }
  })()
</script>
<link href="https://s0.lgstatic.com/kw-web-fed/common.9f883843.css" rel="stylesheet"><link href="https://s0.lgstatic.com/kw-web-fed/course/main.793fddbd.css" rel="stylesheet">



<div id="app" class=""><div data-v-daa3f53a="" data-v-6cc00bca="" class="pc-detail-wrap"><div data-v-5d185b94="" data-v-daa3f53a="" class="wrap pc-header"><div data-v-5d185b94="" class="wrap-content"><div data-v-5d185b94="" class="wrap-left"><a data-v-5d185b94="" href="https://edu.lagou.com"><img data-v-5d185b94="" src="https://s21.lgstatic.com/growth/activity/20210729/1627528017710.png?x-oss-process=style/80" alt="" class="logo"></a> <h1 data-v-5d185b94="" class="title">
          拉勾教育
      </h1> <h1 data-v-5d185b94="" class="desc">
          互联网职业教育平台
      </h1></div> <div data-v-5d185b94="" class="wrap-right"><div data-v-5d185b94="" class="tab-list"><h2 data-v-5d185b94="" class="tab-item">
              选课
          </h2><h2 data-v-5d185b94="" class="tab-item">
              学习
          </h2><h2 data-v-5d185b94="" class="tab-item">
              企业培训
          </h2></div> <div data-v-5d185b94="" class="login-wrap"><div data-v-5d185b94="" class="wrap-login"><span data-v-5d185b94="" class="username triangle">
                  张熙远
                  <div data-v-5d185b94="" class="tool-tip tool-tip-user"><a data-v-5d185b94="" href="https://tb.53kf.com/code/client/90d3e270b5d355aa44bafe74fd7fe8a11/3" target="_blank" class="tool-tip-item">
                          帮助与反馈
                      </a><a data-v-5d185b94="" href="https://kaiwu.lagou.com/certificate/index" target="_certificate" class="tool-tip-item">
                          学业证书
                      </a><a data-v-5d185b94="" href="https://kaiwu.lagou.com/setting" target="_self" class="tool-tip-item">
                          账号设置
                      </a><a data-v-5d185b94="" href="https://kaiwu.lagou.com/frontLogout.do" target="_self" class="tool-tip-item">
                          退出登录
                      </a></div></span> <img data-v-5d185b94="" src="https://s0.lgstatic.com/common/image/pc/default_boy_headpic1.png" alt="" class="avatar"></div></div></div></div> <!----></div> <div data-v-daa3f53a="" class="container"><div data-v-130a0286="" data-v-daa3f53a="" class="pub-header"><div data-v-130a0286="" class="pub-header-container-wrap"><div data-v-130a0286="" class="item-wrap inline-block catalog"><div data-v-130a0286="" class="img-wrap inline-block"></div> <div data-v-130a0286="" class="text-wrap inline-block">
          收起目录
      </div></div> <div data-v-130a0286="" class="splice-line inline-block"></div> <div data-v-130a0286="" class="item-wrap inline-block pre"><div data-v-130a0286="" class="img-wrap inline-block"></div> <div data-v-130a0286="" class="text-wrap inline-block">
          上一讲
      </div></div> <div data-v-130a0286="" class="splice-line inline-block"></div> <div data-v-130a0286="" class="item-wrap inline-block next"><div data-v-130a0286="" class="img-wrap inline-block"></div> <div data-v-130a0286="" class="text-wrap inline-block">
          下一讲
      </div></div> <div data-v-130a0286="" class="splice-line inline-block"></div> <div data-v-130a0286="" class="item-wrap inline-block detail"><div data-v-130a0286="" class="img-wrap inline-block"></div> <div data-v-130a0286="" class="text-wrap inline-block">
          课程详情
      </div></div> <div data-v-130a0286="" class="splice-line inline-block"></div> <div data-v-130a0286="" class="item-wrap inline-block all"><div data-v-130a0286="" class="img-wrap inline-block"></div> <div data-v-130a0286="" class="text-wrap inline-block">
          全部课程
      </div></div></div></div> <div data-v-daa3f53a="" class="content-wrap"><div data-v-daa3f53a="" class="left-content-wrap"><div data-v-5f686215="" data-v-daa3f53a="" class="menu-top-tips inline-block"><img data-v-5f686215="" src="https://s0.lgstatic.com/i/image/M00/5D/09/Ciqc1F-D0-OAZTxlAABYS9gye8s357.png" class="image-wrap"> <div data-v-5f686215="" class="menu-top-tips-wrap inline-block"><div data-v-5f686215="" class="title">
      深入浅出搞定 React
  </div> <div data-v-5f686215="" class="name">
      修言
      <div data-v-5f686215="" class="incise inline-block"></div>
      高级前端工程师
  </div> <!----> <div data-v-5f686215="" class="button btn btn-pc-css">
      专属班主任
  </div></div></div> <div data-v-daa3f53a="" class="menu-content calc"><div data-v-68b0779c="" data-v-daa3f53a="" class="class-menu-contaniner more-sections more-sections-detail"><!----> <div data-v-68b0779c="" class="class-menu-box" style="max-height: 185px;"><div data-v-68b0779c="" class="kw-icon-arrow show show-detail show-active"></div> <div data-v-68b0779c="" class="section-name single-line section-name-detail">
      开篇词
  </div> <div data-v-68b0779c="" class="class-menu-block"><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  开篇词 | 这一次，真正吃透 React 知识链路与底层逻辑
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div></div></div><div data-v-68b0779c="" class="class-menu-box" style="max-height: 677px;"><div data-v-68b0779c="" class="kw-icon-arrow show show-detail show-active"></div> <div data-v-68b0779c="" class="section-name single-line section-name-detail">
      模块一：系统深入学习“基础知识”
  </div> <div data-v-68b0779c="" class="class-menu-block"><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  01 | JSX 代码是如何“摇身一变”成为 DOM 的？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  02 | 为什么 React 16 要更改组件的生命周期？（上）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  03 | 为什么 React 16 要更改组件的生命周期？（下）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  04 | 数据是如何在 React 组件之间流动的？（上）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  05 | 数据是如何在 React 组件之间流动的？（下）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  06 | React-Hooks 设计动机与工作模式（上）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  07 | React-Hooks 设计动机与工作模式（下）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div></div></div><div data-v-68b0779c="" class="class-menu-box" style="max-height: 923px;"><div data-v-68b0779c="" class="kw-icon-arrow show show-detail show-active"></div> <div data-v-68b0779c="" class="section-name single-line section-name-detail">
      模块二：刨根问底吃透“核心原理”
  </div> <div data-v-68b0779c="" class="class-menu-block"><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  08 | 深入 React-Hooks 工作机制：“原则”的背后，是“原理”
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  09 | 真正理解虚拟 DOM：React 选它，真的是为了性能吗？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  10 | React 中的“栈调和”（Stack Reconciler）过程是怎样的？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  11 | setState 到底是同步的，还是异步的？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  12 | 如何理解 Fiber 架构的迭代动机与设计思想？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  13 | ReactDOM.render 是如何串联渲染链路的？（上）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  14 | ReactDOM.render 是如何串联渲染链路的？（中）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  15 | ReactDOM.render 是如何串联渲染链路的？（下）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  16 | 剖析 Fiber 架构下 Concurrent 模式的实现原理
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  17 | 特别的事件系统：React 事件与 DOM 事件有何不同？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div></div></div><div data-v-68b0779c="" class="class-menu-box" style="max-height: 431px;"><div data-v-68b0779c="" class="kw-icon-arrow show show-detail show-active"></div> <div data-v-68b0779c="" class="section-name single-line section-name-detail">
      模块三：“周边生态”帮你拓宽技术视野
  </div> <div data-v-68b0779c="" class="class-menu-block"><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  18 | 揭秘 Redux 设计思想与工作原理（上）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  19 | 揭秘 Redux 设计思想与工作原理（下）
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  20 | 从 Redux 中间件实现原理切入，理解“面向切面编程”
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis   isclick  class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  21 | 从 React-Router 切入，系统学习前端路由解决方案
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div></div></div><div data-v-68b0779c="" class="class-menu-box" style="max-height: 267px;"><div data-v-68b0779c="" class="kw-icon-arrow show show-detail show-active"></div> <div data-v-68b0779c="" class="section-name single-line section-name-detail">
      模块四：“生产实践”通用法则
  </div> <div data-v-68b0779c="" class="class-menu-block"><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  22 | 思路拓展：如何打造高性能的 React 应用？
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  23 | 跟 React 学设计模式：掌握编程“套路”，打造高质量应用
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div></div></div><div data-v-68b0779c="" class="class-menu-box" style="max-height: 185px;"><div data-v-68b0779c="" class="kw-icon-arrow show show-detail show-active"></div> <div data-v-68b0779c="" class="section-name single-line section-name-detail">
      结束语
  </div> <div data-v-68b0779c="" class="class-menu-block"><div data-v-68b0779c="" class="class-level-one over-ellipsis    class-level-one-detail"><div data-v-68b0779c="" class="text-wrap"><div data-v-68b0779c="" class="content">
                  结束语 | 聊聊 React 17，谈谈学习前端框架的心法
              </div> <div data-v-68b0779c="" class="item-status-wrap"><!----></div></div></div></div></div></div></div></div> <div data-v-daa3f53a="" class="right-content-wrap" style="height: 100px;"><div data-v-1605a430="" data-v-daa3f53a="" class="main-wrap"><div data-v-1605a430=""><h1 data-v-1605a430="" class="main-title">
      21 | 从 React-Router 切入，系统学习前端路由解决方案
  </h1> <div data-v-1605a430="" class="main-tips">
      2020/12/21
      <span data-v-1605a430="" class="auth">修言</span></div> <div data-v-1605a430="" class="media-player-wrap"><div data-v-6ecd2302="" data-v-1605a430=""><div data-v-6ecd2302="" class="media-container"><div data-v-6ecd2302="" class="button-wrap inline-block"><div data-v-6ecd2302="" class="button-icon inline-block"></div></div> <div data-v-6ecd2302="" class="data-wrap inline-block"><div data-v-6ecd2302="" class="progress-bar"><div class="vue-slider vue-slider-ltr" style="padding: 7px 0px; width: auto; height: 4px;"><div class="vue-slider-rail" style="height: 2px; background: rgb(213, 218, 223); border-radius: 1.5px;"><div class="vue-slider-process" style="height: 100%; top: 0px; left: 0%; width: 0%; transition-property: width, left; transition-duration: 0.5s; background: rgb(252, 215, 102);"></div><div aria-valuetext="00:00/11:48" class="vue-slider-dot vue-slider-dot-hover" role="slider" aria-valuenow="0" aria-valuemin="0" aria-valuemax="708" aria-orientation="horizontal" tabindex="0" style="width: 14px; height: 14px; transform: translate(-50%, -50%); top: 50%; left: 0%; transition: left 0.5s ease 0s;"><div class="vue-slider-dot-handle" style="width: 16px; height: 16px; background: rgb(252, 215, 102); box-shadow: none; margin-top: -1px; z-index: 1;"></div><div class="vue-slider-dot-tooltip vue-slider-dot-tooltip-top"><div class="vue-slider-dot-tooltip-inner vue-slider-dot-tooltip-inner-top" style="padding: 2px 12px; border-radius: 14px; font-size: 14px; color: rgb(0, 0, 0); background: rgb(252, 215, 102); min-width: 20px; border-color: rgb(252, 215, 102);"><span class="vue-slider-dot-tooltip-text">00:00/11:48</span></div></div></div></div></div></div> <div data-v-6ecd2302="" class="detail-wrap "><div data-v-6ecd2302="" class="detail-one">
              30.81M
          </div> <div data-v-6ecd2302="" class="detail-two">
              00:00/11:48
          </div></div></div> <div data-v-6ecd2302="" class="division-line inline-block"></div> <div data-v-6ecd2302="" class="viedo-wrap inline-block"><div data-v-6ecd2302="" class="viedo-icon"></div> <div data-v-6ecd2302="" class="text">
          看视频
      </div></div></div> <!----></div></div> <div data-v-1605a430="" class="main-container"><div data-v-1605a430="" class="rich-text-wrap"><p data-nodeid="1189" class="">React-Router 是 React 场景下的路由解决方案，本讲我们将学习 React-Router 的实现机制，并基于此提取和探讨通用的前端路由解决方案。</p>
<blockquote data-nodeid="1190">
<p data-nodeid="1191">注：没有使用过 React-Router 的同学，可以点击<a href="https://reactrouter.com/web/guides/quick-start" data-nodeid="1306">这里</a>完成快速上手。</p>
</blockquote>
<h3 data-nodeid="1192">认识 React-Router</h3>
<p data-nodeid="1193">本着尽快进入主题的原则，这里我用一个尽可能简单的 Demo 作为引子，帮助你快速地把握 React-Router 的核心功能。请看下面代码（解析在注释里）：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="js"><ol><li><div class="code-word"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
</div></li><li><div class="code-word"><span class="hljs-comment">// 引入 React-Router 中的相关组件</span>
</div></li><li><div class="code-word"><span class="hljs-keyword">import</span> { BrowserRouter <span class="hljs-keyword">as</span> Router, Route, Link } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;
</div></li><li><div class="code-word"><span class="hljs-comment">// 导出目标组件</span>
</div></li><li><div class="code-word"><span class="hljs-keyword">const</span> BasicExample = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
</div></li><li><div class="code-word">  <span class="hljs-comment">// 组件最外层用 Router 包裹</span>
</div></li><li><div class="code-word">  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span>&gt;</span>
</span></div></li><li><div class="code-word">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
</div></li><li><div class="code-word">      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
</div></li><li><div class="code-word">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
</div></li><li><div class="code-word">          // 具体的标签用 Link 包裹
</div></li><li><div class="code-word">          <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
</div></li><li><div class="code-word">        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
</div></li><li><div class="code-word">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
</div></li><li><div class="code-word">          // 具体的标签用 Link 包裹
</div></li><li><div class="code-word">          <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
</div></li><li><div class="code-word">        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
</div></li><li><div class="code-word">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
</div></li><li><div class="code-word">          // 具体的标签用 Link 包裹
</div></li><li><div class="code-word">          <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/dashboard"</span>&gt;</span>Dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
</div></li><li><div class="code-word">        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
</div></li><li><div class="code-word">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</div></li><li><div class="code-word">      <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>
</div></li><li><div class="code-word">
</div></li><li><div class="code-word">      // Route 是用于声明路由映射到应用程序的组件层
</div></li><li><div class="code-word">      <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">exact</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">component</span>=<span class="hljs-string">{Home}</span> /&gt;</span>
</div></li><li><div class="code-word">      <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">component</span>=<span class="hljs-string">{About}</span> /&gt;</span>
</div></li><li><div class="code-word">      <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/dashboard"</span> <span class="hljs-attr">component</span>=<span class="hljs-string">{Dashboard}</span> /&gt;</span>
</div></li><li><div class="code-word">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</div></li><li><div class="code-word">  <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span>
</div></li><li><div class="code-word">);
</div></li><li><div class="code-word"><span class="hljs-comment">// Home 组件的定义</span>
</div></li><li><div class="code-word"><span class="hljs-keyword">const</span> Home = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
</div></li><li><div class="code-word">  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
</span></div></li><li><div class="code-word">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
</div></li><li><div class="code-word">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</div></li><li><div class="code-word">);
</div></li><li><div class="code-word"><span class="hljs-comment">// About 组件的定义</span>
</div></li><li><div class="code-word"><span class="hljs-keyword">const</span> About = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
</div></li><li><div class="code-word">  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
</span></div></li><li><div class="code-word">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
</div></li><li><div class="code-word">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</div></li><li><div class="code-word">);
</div></li><li><div class="code-word"><span class="hljs-comment">// Dashboard 的定义</span>
</div></li><li><div class="code-word"><span class="hljs-keyword">const</span> Dashboard = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
</div></li><li><div class="code-word">  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
</span></div></li><li><div class="code-word">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
</div></li><li><div class="code-word">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</div></li><li><div class="code-word">);
</div></li><li><div class="code-word">
</div></li><li><div class="code-word"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> BasicExample;
</div></li></ol></code></pre></div>
<p data-nodeid="1195">这个 Demo 渲染出的页面效果如下图所示：</p>
<p data-nodeid="1196"><img src="https://s0.lgstatic.com/i/image/M00/8B/20/CgqCHl_bOA2AfagHAAAwif17aiI096.png" alt="Drawing 0.png" data-nodeid="1313"></p>
<p data-nodeid="1197">当我点击不同的链接时，ul 元素内部就会展示不同的组件内容。比如当我点击“About”链接时，就会展示 About 组件的内容，效果如下图所示：</p>
<p data-nodeid="1198"><img src="https://s0.lgstatic.com/i/image2/M01/02/F3/CgpVE1_bOBOAQTs_AAAuMzu6RbY087.png" alt="Drawing 1.png" data-nodeid="1317"></p>
<p data-nodeid="1199">注意，点击 About 后，界面中发生变化的地方有两处（见下图标红处），除了 ul 元素的内容改变了之外，路由信息也改变了。</p>
<p data-nodeid="1200"><img src="https://s0.lgstatic.com/i/image2/M01/02/F2/Cip5yF_bOBmAfCOxAAA2a1pswj4899.png" alt="Drawing 2.png" data-nodeid="1321"></p>
<p data-nodeid="1201">在 React-Router 中，各种细碎的功能点有不少，但作为 React 框架的前端路由解决方案，它最基本也是最核心的能力，其实正是你刚刚所见到的这一幕——<strong data-nodeid="1327">路由的跳转</strong>。这也是我们接下来讨论的重点。</p>
<p data-nodeid="1202">接下来我们就结合 React-Router 的源码，一起来看看“跳转”这个动作是如何实现的。</p>
<h3 data-nodeid="1203">React-Router 是如何实现路由跳转的？</h3>
<p data-nodeid="1204">首先需要回顾下 Demo 中的第一行代码：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word"><span class="hljs-keyword">import</span> { BrowserRouter as Router, Route, Link } from <span class="hljs-string">"react-router-dom"</span>;
</div></li></ol></code></pre></div>
<p data-nodeid="1206">这行代码告诉我们，为了实现一个简单的路由跳转效果，一共从 React-Router 中引入了以下 3 个组件：</p>
<ul data-nodeid="1207">
<li data-nodeid="1208">
<p data-nodeid="1209">BrowserRouter</p>
</li>
<li data-nodeid="1210">
<p data-nodeid="1211">Route</p>
</li>
<li data-nodeid="1212">
<p data-nodeid="1213">Link</p>
</li>
</ul>
<p data-nodeid="1214">这 3 个组件也就代表了 React-Router 中的 3 个核心角色：</p>
<ul data-nodeid="1215">
<li data-nodeid="1216">
<p data-nodeid="1217"><strong data-nodeid="1340">路由器</strong>，比如 BrowserRouter 和 HashRouter</p>
</li>
<li data-nodeid="1218">
<p data-nodeid="1219"><strong data-nodeid="1345">路由</strong>，比如 Route 和 Switch</p>
</li>
<li data-nodeid="1220">
<p data-nodeid="1221"><strong data-nodeid="1350">导航</strong>，比如 Link、NavLink、Redirect</p>
</li>
</ul>
<p data-nodeid="1222">路由（以 Route 为代表）负责定义路径与组件之间的映射关系，而导航（以 Link 为代表）负责触发路径的改变，路由器（包括 BrowserRouter 和 HashRouter）则会根据 Route 定义出来的映射关系，为新的路径匹配它对应的逻辑。</p>
<p data-nodeid="1223">以上便是 3 个角色“打配合”的过程。这其中，最需要你注意的是路由器这个角色，React Router 曾在说明文档中官宣它是“React Router 应用程序的核心”。因此学习 React Router，最要紧的是搞明白路由器的工作机制。</p>
<h4 data-nodeid="1224">路由器：BrowserRouter 和 HashRouter</h4>
<p data-nodeid="1225"><strong data-nodeid="1358">路由器负责感知路由的变化并作出反应，它是整个路由系统中最为重要的一环</strong>。React-Router 支持我们使用 hash（对应 HashRouter）和 browser（对应 BrowserRouter） 两种路由规则，这里我们把两种规则都讲一下。</p>
<p data-nodeid="1226">HashRouter、BrowserRouter，这俩人名字这么像，该不会底层逻辑区别也不大吧？别说，还真是如此。我们首先来瞟一眼 HashRouter 的源码：</p>
<p data-nodeid="1227"><img src="https://s0.lgstatic.com/i/image2/M01/02/F2/Cip5yF_bOCSAErIlAAEU7gTEf-c538.png" alt="Drawing 3.png" data-nodeid="1362"></p>
<p data-nodeid="1228">再瞟一眼 BrowserRouter 的源码：</p>
<p data-nodeid="1229"><img src="https://s0.lgstatic.com/i/image/M00/8B/15/Ciqc1F_bOCyAFB9oAADQnB3x2AY718.png" alt="Drawing 4.png" data-nodeid="1366"></p>
<p data-nodeid="1230">我们会发现这两个文件惊人的相似，而最关键的区别我也已经在图中分别标出，即它们调用的 history 实例化方法不同：HashRouter 调用了 <a href="https://github.com/ReactTraining/history/blob/v4.7.2/modules/createHashHistory.js" data-nodeid="1370">createHashHistory</a>，BrowserRouter 调用了 <a href="https://github.com/ReactTraining/history/blob/v4.7.2/modules/createBrowserHistory.js" data-nodeid="1374">createBrowserHistory</a>。</p>
<p data-nodeid="1231">这两个 history 的实例化方法均来源于 <a href="https://github.com/ReactTraining/history" data-nodeid="1379">history</a> 这个独立的代码库，关于它的实现细节，你倒不必纠结。对于 <a href="https://github.com/ReactTraining/history/blob/v4.7.2/modules/createHashHistory.js" data-nodeid="1383">createHashHistory</a> 和 <a href="https://github.com/ReactTraining/history/blob/v4.7.2/modules/createBrowserHistory.js" data-nodeid="1387">createBrowserHistory</a> 这两个 API，我们最要紧的是掌握它们各自的特征。</p>
<ul data-nodeid="2070">
<li data-nodeid="2071">
<p data-nodeid="2072"><code data-backticks="1" data-nodeid="2074">createBrowserHistory</code>：它将在浏览器中使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/History" data-nodeid="2078">HTML5 history API</a> 来处理 URL（见下图标红处的说明），它能够处理形如这样的 URL，example.com/some/path。由此可得，<strong data-nodeid="2083">BrowserRouter 是使用 HTML 5 的 history API 来控制路由跳转的。</strong></p>
</li>
</ul>
<p data-nodeid="2073" class=""><img src="https://s0.lgstatic.com/i/image2/M01/03/78/Cip5yF_cKqmATWf8AAN3hb7gX3k493.png" alt="图片1.png" data-nodeid="2086"></p>


<ul data-nodeid="1236">
<li data-nodeid="1237">
<p data-nodeid="1238" class="te-preview-highlight"><code data-backticks="1" data-nodeid="1402">createHashHistory</code>：它是使用 hash tag (#) 处理 URL 的方法，能够处理形如这样的 URL，example.com/#/some/path。我们可以看到<a href="https://github.com/ReactTraining/history/blob/v4.7.2/modules/createHashHistory.js" data-nodeid="1406">它的源码中</a>对各种方法的定义基本都围绕 hash 展开（如下图所示），由此可得，<strong data-nodeid="1412">HashRouter 是通过 URL 的 hash 属性来控制路由跳转的</strong>。</p>
</li>
</ul>
<p data-nodeid="1239"><img src="https://s0.lgstatic.com/i/image/M00/8B/15/Ciqc1F_bOFaAWDI8AAD_FnBQsTc850.png" alt="Drawing 6.png" data-nodeid="1415"></p>
<blockquote data-nodeid="1240">
<p data-nodeid="1241">注：关于 hash 和 history 这两种模式，我们在下文中还会持续探讨。</p>
</blockquote>
<p data-nodeid="1242">现在，见识了表面现象，了解了背后机制。我们不妨回到故事的原点，再多问自己一个问题：为什么我们需要 React-Router？</p>
<p data-nodeid="1243">或者把这个问题稍微拔高一点：<strong data-nodeid="1423">为什么我们需要前端路由</strong>？</p>
<p data-nodeid="1244">这一切的一切，都要从很久以前说起。</p>
<h3 data-nodeid="1245">理解前端路由——是什么？解决什么问题？</h3>
<h4 data-nodeid="1246">背景——问题的产生</h4>
<p data-nodeid="1247">在前端技术早期，一个 URL 对应一个页面，如果你要从 A 页面切换到 B 页面，那么必然伴随着页面的刷新。这个体验并不好，不过在最初也是无奈之举——毕竟用户只有在刷新页面的情况下，才可以重新去请求数据。</p>
<p data-nodeid="1248">后来，改变发生了——Ajax 出现了，它允许人们在不刷新页面的情况下发起请求；与之共生的，还有“不刷新页面即可更新页面内容”这种需求。在这样的背景下，出现了<strong data-nodeid="1433">SPA（单页面应用</strong>）。</p>
<p data-nodeid="1249">SPA 极大地提升了用户体验，它允许页面在不刷新的情况下更新页面内容，使内容的切换更加流畅。但是在 SPA 诞生之初，人们并没有考虑到“定位”这个问题——在内容切换前后，页面的 URL 都是一样的，这就带来了两个问题：</p>
<ul data-nodeid="1250">
<li data-nodeid="1251">
<p data-nodeid="1252">SPA 其实并不知道当前的页面“进展到了哪一步”，可能你在一个站点下经过了反复的“前进”才终于唤出了某一块内容，但是此时只要刷新一下页面，一切就会被清零，你必须重复之前的操作才可以重新对内容进行定位——SPA 并不会“记住”你的操作；</p>
</li>
<li data-nodeid="1253">
<p data-nodeid="1254">由于有且仅有一个 URL 给页面做映射，这对 SEO 也不够友好，搜索引擎无法收集全面的信息。</p>
</li>
</ul>
<p data-nodeid="1255">为了解决这个问题，前端路由出现了。</p>
<h4 data-nodeid="1256">前端路由——SPA“定位”解决方案</h4>
<p data-nodeid="1257">前端路由可以帮助我们在仅有一个页面的情况下，“记住”用户当前走到了哪一步——为 SPA 中的各个视图匹配一个唯一标识。这意味着用户前进、后退触发的新内容，都会映射到不同的 URL 上去。此时即便他刷新页面，因为当前的 URL 可以标识出他所处的位置，因此内容也不会丢失。</p>
<p data-nodeid="1258">那么如何实现这个目的呢？首先我们要解决以下两个问题。</p>
<ul data-nodeid="1259">
<li data-nodeid="1260">
<p data-nodeid="1261">当用户刷新页面时，浏览器会默认根据当前 URL 对资源进行重新定位（发送请求）。这个动作对 SPA 是不必要的，因为 SPA 作为单页面，无论如何也只会有一个资源与之对应。此时若走正常的请求-刷新流程，反而会使用户的前进后退操作无法被记录。</p>
</li>
<li data-nodeid="1262">
<p data-nodeid="1263">单页面应用对服务端来说，就是一个 URL、一套资源，那么如何做到用“不同的 URL”来映射不同的视图内容呢？</p>
</li>
</ul>
<p data-nodeid="1264">从这两个问题来看，服务端已经救不了 SPA 这个场景了。所以要靠咱们前端自力更生，不然怎么叫“前端路由”呢？作为前端，我们可以提供以下这样的解决思路。</p>
<ul data-nodeid="1265">
<li data-nodeid="1266">
<p data-nodeid="1267"><strong data-nodeid="1448">拦截用户的刷新操作，避免服务端盲目响应、返回不符合预期的资源内容</strong>，把刷新这个动作完全放到前端逻辑里消化掉；</p>
</li>
<li data-nodeid="1268">
<p data-nodeid="1269"><strong data-nodeid="1453">感知 URL 的变化</strong>。这里不是说要改造 URL、凭空制造出 N 个 URL 来。而是说 URL 还是那个 URL，只不过我们可以给它做一些微小的处理，这些处理并不会影响 URL 本身的性质，不会影响服务器对它的识别，只有我们前端能感知到。一旦我们感知到了，我们就根据这些变化、用 JS 去给它生成不同的内容。</p>
</li>
</ul>
<h3 data-nodeid="1270">实践思路——hash 与 history</h3>
<p data-nodeid="1271">接下来重点就来了，现在前端界对前端路由有哪些实现思路？这里需要掌握的两个实践就是 hash 与 history。</p>
<h4 data-nodeid="1272">hash 模式</h4>
<p data-nodeid="1273">hash 模式是指通过改变 URL 后面以“#”分隔的字符串（这货其实就是 URL 上的哈希值），从而让页面感知到路由变化的一种实现方式。举个例子，比如这样的一个 URL：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">https:<span class="hljs-comment">//www.imooc.com/</span>
</div></li></ol></code></pre></div>
<p data-nodeid="1275">我就可以通过增加和改变哈希值，来让这个 URL 变得有那么一点点不一样：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word"><span class="hljs-comment">// 主页</span>
</div></li><li><div class="code-word">https:<span class="hljs-comment">//www.imooc.com/#index</span>
</div></li><li><div class="code-word"><span class="hljs-comment">// 活动页</span>
</div></li><li><div class="code-word">https:<span class="hljs-comment">//www.imooc.com/#activePage</span>
</div></li></ol></code></pre></div>
<p data-nodeid="1277">这个“不一样”是前端完全可感知的——JS 可以帮我们捕获到哈希值的内容。在 hash 模式下，我们实现路由的思路可以概括如下：</p>
<p data-nodeid="1278">（1）hash 的改变：我们可以通过 location 暴露出来的属性，直接去修改当前 URL 的 hash 值：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">window.location.hash = <span class="hljs-string">'index'</span>;
</div></li></ol></code></pre></div>
<p data-nodeid="1280">（2）hash 的感知：通过监听 “hashchange”事件，可以用 JS 来捕捉 hash 值的变化，进而决定我们页面内容是否需要更新：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word"><span class="hljs-comment">// 监听hash变化，点击浏览器的前进后退会触发</span>
</div></li><li><div class="code-word">window.addEventListener(<span class="hljs-string">'hashchange'</span>, function(event){ 
</div></li><li><div class="code-word">    <span class="hljs-comment">// 根据 hash 的变化更新内容</span>
</div></li><li><div class="code-word">},<span class="hljs-keyword">false</span>)
</div></li></ol></code></pre></div>
<h4 data-nodeid="1282">history 模式</h4>
<p data-nodeid="1283">大家知道，在我们浏览器的左上角，往往有这样的操作点：</p>
<p data-nodeid="1284"><img src="https://s0.lgstatic.com/i/image/M00/8B/20/CgqCHl_bOGeAQW2AAACAaTKsTyM327.png" alt="Drawing 7.png" data-nodeid="1466"></p>
<p data-nodeid="1285">通过点击前进后退箭头，就可以实现页面间的跳转。这样的行为，其实是可以通过 API 来实现的。</p>
<p data-nodeid="1286">浏览器的 history API 赋予了我们这样的能力，在 HTML 4 时，就可以通过下面的接口来操作浏览历史、实现跳转动作：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">window.history.forward()  <span class="hljs-comment">// 前进到下一页</span>
</div></li></ol></code></pre></div>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">window.history.back() <span class="hljs-comment">// 后退到上一页</span>
</div></li></ol></code></pre></div>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">window.history.go(<span class="hljs-number">2</span>) <span class="hljs-comment">// 前进两页</span>
</div></li></ol></code></pre></div>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">window.history.go(-<span class="hljs-number">2</span>) <span class="hljs-comment">// 后退两页</span>
</div></li></ol></code></pre></div>
<p data-nodeid="1291">很有趣吧？遗憾的是，在这个阶段，我们能做的只是“切换”，而不能“改变”。好在从 HTML 5 开始，浏览器支持了 pushState 和 replaceState 两个 API，允许我们对浏览历史进行修改和新增：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">history.pushState(data[,title][,url]); <span class="hljs-comment">// 向浏览历史中追加一条记录</span>
</div></li></ol></code></pre></div>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">history.replaceState(data[,title][,url]); <span class="hljs-comment">// 修改（替换）当前页在浏览历史中的信息</span>
</div></li></ol></code></pre></div>
<p data-nodeid="1294">这样一来，修改动作就齐活了。</p>
<p data-nodeid="1295">有修改，就要有对修改的感知能力。在 history 模式下，我们可以通过监听 popstate 事件来达到我们的目的：</p>
<div class="course-code-area"><div class="copy-btn"><div class="copy-icon"></div>复制代码</div><pre><code data-language="java"><ol><li><div class="code-word">window.addEventListener(<span class="hljs-string">'popstate'</span>, function(e) {
</div></li><li><div class="code-word">  console.log(e)
</div></li><li><div class="code-word">});
</div></li></ol></code></pre></div>
<p data-nodeid="1297">每当浏览历史发生变化，popstate 事件都会被触发。</p>
<p data-nodeid="1298"><strong data-nodeid="1481">注</strong>：go、forward 和 back 等方法的调用确实会触发 popstate，但是<strong data-nodeid="1482">pushState 和 replaceState 不会</strong>。不过这一点问题不大，我们可以通过自定义事件和全局事件总线来手动触发事件。</p>
<h3 data-nodeid="1299">总结</h3>
<p data-nodeid="1300">本讲我们以 React-Router 为切入点，结合源码剖析了 React-Router 中“跳转”这一动作的实现原理，由此牵出了针对“前端路由方案”这个知识点相对系统的探讨。行文至此，React 周边生态所涉及的重难点知识，相信已经深深地烙印在了你的脑海里。</p>
<p data-nodeid="1301" class="">下一讲开始，我们将围绕“React 设计模式与最佳实践”以及“React 性能优化”两条主线展开学习。彼时，站在“生产实践”这个全新的视角去认识 React 后，相信各位对它的理解定会更上一层楼。大家加油！</p></div></div></div> <div data-v-1605a430="" class="el-dialog__wrapper" style="display: none;"><div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog el-dialog--center show-img-wrap" style="margin-top: 15vh; width: 60%;"><div class="el-dialog__header"><span class="el-dialog__title"></span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><!----></div></div></div> <div data-v-daa3f53a="" class="fix-box-wrap"><div data-v-daa3f53a="" class="mini-player-wrap"><div data-v-2ee8fa4a="" data-v-daa3f53a="" class="player-container-wrap"><div data-v-2ee8fa4a="" class="player"><div data-v-2ee8fa4a="" class="close-btn"></div> <div data-v-2ee8fa4a="" class="content"><div data-v-2ee8fa4a="" class="theme single-line narrow-theme">
          
      </div> <div data-v-2ee8fa4a="" class="time-course"><div data-v-2ee8fa4a="" class="time">
              00:00<span data-v-2ee8fa4a="" class="line"></span></div> <span data-v-2ee8fa4a="" class="course-name single-line">深入浅出搞定 React</span></div></div> <div data-v-2ee8fa4a="" class="player-container"><div data-v-2ee8fa4a="" class="play-btn"><div data-v-2ee8fa4a="" class="play-status playing"></div></div> <div data-v-2ee8fa4a="" class="play-next next-unable"></div></div></div></div></div> <!----></div> <div data-v-daa3f53a="" class="right-content-space"></div> <div data-v-daa3f53a="" class="right-content-message"><div data-v-4bc80e00="" data-v-daa3f53a="" class="message pc-message"><div data-v-4bc80e00="" class="message-topic"><div data-v-4bc80e00="" class="message-topic-title">
      精选留言
      </div> <div data-v-4bc80e00="" class="message-topic-write pointer btn-pc-css"><img data-v-4bc80e00="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAABDlBMVEUAAAAAAAArKyscHBwrKyswMDAtLS0xMTEuLi4rKyszMzMzMzMyMjIvLy8zMzMxMTEvLy8tLS0zMzMyMjIxMTEwMDAyMjIwMDAzMzMxMTEwMDAxMTEyMjIzMzMyMjIzMzMxMTEyMjIyMjIyMjIyMjIyMjIyMjIzMzMyMjIzMzMyMjIyMjIzMzMyMjIzMzMyMjIyMjIzMzMyMjIyMjIzMzMyMjIyMjIyMjIzMzMyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIzMzMzMzMyMjIzMzMzMzMzMzMzMzMyMjIzMzMyMjIzMzMzMzMzMzMyMjIzMzMzMzMzMzMyMjIzMzMzMzMyMjIzMzMMFbxYAAAAWXRSTlMAAwYJDBARFRYYHiMkJigqKy0tMzk7PUBBQ0VJTFBSVVlbXGFla3B0dXh/hYeKjY+QkZSVlpiao6ausbK3u73DxcfIys3O0NPY3N3g4uXm6Ovu8fX3+Pr7/Z2GrlIAAAEvSURBVCjPdZJrT8JAEEVvC4ggqAiKiq0vlLa8tIoWBQFBRK0yIrTM//8jfighLWzPh8nNnsnMZrPAAlkxe+Q41DMVGUGiOrHbbzYazb7LpEf9TiVuKzEvx5Q2k7pUUo0HOX9vbsA1aZFNvl9ZI9+x6SWdq1ijyjoApGcWBFizNIAWxUUyTi0gwyUIKXEGZTchlgm3jG4HAAq2XQhWoNMF1QHAZraDFagTHCNMGg4mlbCxlT+MLIRgjWB9hTjp28IZ74vlIV8gQk9i2fqNABqfiJzKVwDk4Xhr3e3QmwQAKfrcXnUp+yfppSzRadCdT2hv2TfkS5/Kv3Av6fsWjgHk1d3NZFa9HfFYk/xzpkb0gT3mr9eR4JLp88f85qCoacXj2NrNp2wfhb0x3h83BKf/ogM3zcQrR7gAAAAASUVORK5CYII=" class="message-topic-write-icon">
      写留言
  </div></div> <!----> <!---->  <div data-v-4bc80e00="" class="message-list"><div data-v-4bc80e00="" class="message-list-title"><div data-v-4bc80e00="" class="message-list-title-left"><!----> <div data-v-4bc80e00="" class="message-list-title-left-name">
              **威
          </div></div> <div data-v-4bc80e00="" class="message-list-title-right"><!----> <img data-v-4bc80e00="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=" alt="right-icon" class="message-list-title-right-icon"> <div data-v-4bc80e00="" class="message-list-title-right-praise">
              4
          </div></div></div> <div data-v-4bc80e00="" class="message-list-container"><div data-v-4bc80e00="" class="message-list-content">快看完了，意犹未尽😀</div> <!----></div> <!----> <!----> <!----></div><div data-v-4bc80e00="" class="message-list"><div data-v-4bc80e00="" class="message-list-title"><div data-v-4bc80e00="" class="message-list-title-left"><!----> <div data-v-4bc80e00="" class="message-list-title-left-name">
              console_man
          </div></div> <div data-v-4bc80e00="" class="message-list-title-right"><!----> <img data-v-4bc80e00="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=" alt="right-icon" class="message-list-title-right-icon"> <div data-v-4bc80e00="" class="message-list-title-right-praise">
              
          </div></div></div> <div data-v-4bc80e00="" class="message-list-container"><div data-v-4bc80e00="" class="message-list-content">比心修言</div> <!----></div> <!----> <!----> <!----></div> <!----></div> <div data-v-7580e7ec="" data-v-daa3f53a="" class="el-dialog__wrapper" style="display: none;"><div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog el-dialog--center" style="margin-top: 25vh; width: 400px;"><div class="el-dialog__header"><span class="el-dialog__title"></span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><!----></div></div> <div data-v-e31d0af2="" data-v-daa3f53a="" class="el-dialog__wrapper" style="display: none;"><div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog el-dialog--center" style="margin-top: 10vh; width: 500px;"><div class="el-dialog__header"><span class="el-dialog__title"></span><!----></div><!----><!----></div></div></div></div></div></div></div> <video data-v-537ed502="" id="video" controls="controls" x-webkit-airplay="true" x5-video-player-fullscreen="true" preload="auto" playsinline="true" webkit-playsinline="" x5-video-player-type="h5" class="video vjs-default-skin"><source data-v-537ed502="" type="application/x-mpegURL" src=""></video> <!----> <div><!----> <!----> <!----> <div data-v-51f7ab0d="" class="vux-alert purchase-alert-container" current-environment="PC"><div class="vux-x-dialog"><div class="weui-mask" style="display: none;"></div> <div class="weui-dialog" style="display: none;"><div class="weui-dialog__hd"><strong class="weui-dialog__title">购买成功</strong></div> <div class="weui-dialog__bd"><div data-v-51f7ab0d="" class="purchase-alert-content"><img data-v-51f7ab0d="" src="data:image/png;base64,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" alt="购买成功" class="purchase-success-img"></div></div> <div class="weui-dialog__ft"><a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">我知道了</a></div></div></div></div> <!----> <!----> <!----> <!----> <div data-v-0b91fc6d="" class="pc-all-dirlog-wrap"><div data-v-467635e0="" data-v-0b91fc6d="" class="el-dialog__wrapper sale-pc-all-dirlog" style="display: none;"><div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog el-dialog--center" style="margin-top: 25vh; width: 500px;"><div class="el-dialog__header"><span class="el-dialog__title"></span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><!----></div></div></div></div></div>
<!-- 如需在IE8、9浏览器中初始化播放器，浏览器需支持Flash并在页面中引入 -->
<!--[if lt IE 9]>
<script src="//imgcache.qq.com/open/qcloud/video/tcplayer/ie8/videojs-ie8.js"></script>
<![endif]-->

<script id="_lgpassport_" data-css-site="0" data-css-popup="0" type="text/javascript" src="https://passport.lagou.com/static/js/passport.js"></script>

<script type="text/javascript">
//后端变量赋值
  window.courseInfo = {"id":510,"courseCId":"","courseName":"深入浅出搞定 React","teachers":[{"id":512,"teacherName":"修言","position":"高级前端工程师","teacherHeadPicUrl":"https://s0.lgstatic.com/i/image/M00/5C/83/CgqCHl-BnE6Adj2iAAAI-hEnRgU445.png","description":"<p><span data-shimo-docs=\"[[20,&quot;他是 React 重度用户，对 React 源码、底层原理及周边生态有着较为深入的探究和理解。早期专注于性能优化和前端工程化，曾将线上大型应用性能提升率做到 40%，并基于 React 打造过团队新基建。现在在一线电商集团专攻前端框架与底层链路设计，同时，作为多年一线前端面试官，积累了丰富的面试经验。&quot;,&quot;0:\\&quot;%23494949\\&quot;&quot;]]\"></span></p><p line=\"ydpB\" linespacing=\"115\"><span style=\"font-size: 14px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;\">他是 React 重度用户，对 React 源码、底层原理及周边生态有着较为深入的探究和理解。早期专注于性能优化和前端工程化，曾将线上大型应用性能提升率做到 40%，并基于 React 打造过团队新基建。现在在某一线互联网大厂专攻前端框架与底层链路设计，同时，作为多年一线前端面试官，积累了丰富的面试经验。</span></p><p><br/></p><p><br/></p>"}],"totalCourseTime":20,"totalDuration":1,"sales":13477,"price":"98","priceTag":"立即购买","discounts":"98","discountsTag":"立即购买","courseImgUrl":"https://s0.lgstatic.com/i/image/M00/5C/83/CgqCHl-BnE6Adj2iAAAI-hEnRgU445.png","sellGoodsId":556,"sellGoodsPriceId":47335,"lgCoinPrice":98,"isBuy":false,"isFavorite":false,"isNewDes":"","seoDescription":"本专栏基于源码提炼出来原理，所涉及的原理，可以帮助你解决掉实际工作中的大多数疑难杂症，也可以 match 上大厂对资深前端工程师的技术深度的要求。在广度方面，专栏涵盖了对基本问题的较为深入和完善的讲解，涵盖了 React 周边生态及生产实践，足以帮助你构建起“表象——原理——应用”的完整学习链路。","seoKeywords":"前端开发,React,React-Hooks,栈调,Fiber,setState,Redux,Facebook,源码分析,技术栈,JS,ES2015,React-Router,DOM,React Native,state,props,diff,umi,Suspense,React.js,batchUpdate,setState,\tWeb ,前端,UI,HTML,jsx,ShoppingList,Props","seoTitle":"深入浅出搞定 React - 高级前端工程师 - 拉勾教育","shareTitle":"戳此，带你吃透 React 知识链路和底层逻辑","shareDescription":"帮你构建起“表象、原理、应用”的完整学习链路。","brief":"掌握 React 知识链路和底层逻辑","courseListImg":"https://s0.lgstatic.com/i/image/M00/5D/09/Ciqc1F-D0-OAZTxlAABYS9gye8s357.png","courseType":1,"previewFirstField":"共22讲","previewSecondField":"已全部更新","joinMember":false,"freeForVip":true,"decorateId":275,"successShowType":"COURSE_COMMUNITY","weixinQrUrl":"https://s0.lgstatic.com/i/image/M00/59/46/Ciqc1F9xW1eAEPp6AAS4A4rXd4I423.png","appDecorateId":0,"recruitAppDecorateId":0,"joinSeckill":false,"seckillRemainSeconds":"0","hasActivityTask":false,"enterpriseDecorateId":275,"hasCoupon":false,"hasActivityGroup":false,"synEnterprise":true,"classCourseType":0};
      window.isLogin = true;
      window.sellGoodsPriceId = -1;
      window.orderToken = '6b62455562524a2abd56ef262bd463b1';
      window.userInfo = {"id":20015885,"nickName":"张熙远","isActive":0,"portrait":"https://s0.lgstatic.com/common/image/pc/default_boy_headpic1.png"};
      window.enterNewPage = false;
          window.activityButtonInfo = null;
  
</script>
<script type="text/javascript" src="https://s21.lgstatic.com/growth/activity/20201206/1607238135888.js" crossorigin=""></script>

<!-- <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script> -->

<!---->
<!---->





<script type="text/javascript" src="https://s1.lgstatic.com/kw-web-fed/js/dll/vendor.424fdf064e46228ef60d.dll.js" crossorigin="anonymous"></script>
<script src="https://s0.lgstatic.com/kw-web-fed/js/runtime~course/main.807e6d9.js" crossorigin="anonymous"></script><script src="https://s0.lgstatic.com/kw-web-fed/js/lazy-load/common.29b3b88.js" crossorigin="anonymous"></script><script src="https://s0.lgstatic.com/kw-web-fed/js/lazy-load/vendors~404/main~500/main~activity-collage/main~activity/main~activity818/main~algorithm-shock/main~~4141e3fd.69f9030.js" crossorigin="anonymous"></script><script src="https://s0.lgstatic.com/kw-web-fed/js/lazy-load/course/main.9a9f2f8.js" crossorigin="anonymous"></script><div class="lg-pay lg-recharge-pay-container">
<div class="lg-pay-container recharge-pay-container">
  <div class="lg-pay-close"></div>
  <div class="modal-payment-title">
      <i class="icon-hd"></i>
      <span class="title-text">已开启安全支付</span>
  </div>
  <div class="amount-coupon"></div>
  <div class="recharge-pay-title">请选择支付方式</div>
  <div class="pay-methods">
              <div class="pay-method-list">
                  <div class="lg-pay-select lg-pay-select-ali pay-method-item pay-ali active">
                      <i class="pay-icon-ali"></i>
                      <span class="pay-method-name">支付宝支付</span>
                  </div>
                  <div class="lg-pay-select lg-pay-select-wx pay-method-item pay-wx ">
                      <i class="pay-icon-wx"></i>
                      <span class="pay-method-name">微信支付</span>
                  </div>
              </div>
          </div>
          <div class="lg-pay-qrcode lg-pay-qrcode-wx">
              <canvas id="wxQrcode"></canvas>
          </div>
          <div class="lg-pay-qrcode lg-pay-qrcode-ali" style="display:block">
              <canvas id="aliQrcode"></canvas>
          </div>
         
          <div class="pay-qrcode-status">
              <span>
                  <span class="left-text">未支付成功，请重新扫码支付</span>
                  <div class="pay-tips">
                    <span>使用支付宝扫码支付</span>
                    <a class="link">
                      我已支付
                    </a>
                  </div>
              </span>
          </div>
          <div class="pay-notes">
              <span>付费即表示同意<a href="https://activity.lagou.com/app/business/service-agreement.html" }="" target="_blank">《拉勾网在线增值服务协议》</a></span>
          </div>
</div>
</div><div class="lg-pay-recharge" style="display: none;">
<div class="lg-pay-container lg-pay-recharge-confirm">
  <div class="lg-pay-close"></div>
  <div class="recharge-title">勾豆充值</div>
  <div>
      <div class="recharge-label">填写充值勾豆数量</div>
      <div class="recharge-amount">
          <input type="text" class="amount input" min="0" max="9999" value="100">
      </div>
  </div>
  <div class="recharge-tips">
      需支付：<span class="count-show">100元</span><span class="recharge-description">（1元=1勾豆）</span>
  </div>
  <div class="recharge-btn">立即充值</div>
</div>
</div><div class="lg-pay-recharge" style="display: none;">
<div class="lg-pay-container lg-pay-recharge-confirm">
  <div class="lg-pay-close"></div>
  <div class="recharge-title">勾豆充值</div>
  <div>
      <div class="recharge-label">填写充值勾豆数量</div>
      <div class="recharge-amount">
          <input type="text" class="amount input" min="0" max="9999" value="100">
      </div>
  </div>
  <div class="recharge-tips">
      需支付：<span class="count-show">100元</span><span class="recharge-description">（1元=1勾豆）</span>
  </div>
  <div class="recharge-btn">立即充值</div>
</div>
</div><script type="text/javascript" crossorigin="anonymous" src="https://kaiwu.lagou.com/upload/oss.js?v=1010"></script>

<div class="xl-chrome-ext-bar" id="xl_chrome_ext_{4DB361DE-01F7-4376-B494-639E489D19ED}" style="display: none;">
<div class="xl-chrome-ext-bar__logo"></div>

<a id="xl_chrome_ext_download" href="javascript:;" class="xl-chrome-ext-bar__option">下载视频</a>
<a id="xl_chrome_ext_close" href="javascript:;" class="xl-chrome-ext-bar__close"></a>
</div><script></script><div id="cboxOverlay" style="display: none;"></div><div id="colorbox" class="" role="dialog" tabindex="-1" style="display: none;"><div id="cboxWrapper"><div><div id="cboxTopLeft" style="float: left;"></div><div id="cboxTopCenter" style="float: left;"></div><div id="cboxTopRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxMiddleLeft" style="float: left;"></div><div id="cboxContent" style="float: left;"><div id="cboxTitle" style="float: left;"></div><div id="cboxCurrent" style="float: left;"></div><button type="button" id="cboxPrevious"></button><button type="button" id="cboxNext"></button><button id="cboxSlideshow"></button><div id="cboxLoadingOverlay" style="float: left;"></div><div id="cboxLoadingGraphic" style="float: left;"></div></div><div id="cboxMiddleRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxBottomLeft" style="float: left;"></div><div id="cboxBottomCenter" style="float: left;"></div><div id="cboxBottomRight" style="float: left;"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none;"></div></div></body>